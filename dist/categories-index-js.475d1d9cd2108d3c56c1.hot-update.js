webpackHotUpdate("categories-index-js",{

/***/ "./src/pages/categories/index.js":
/*!***************************************!*\
  !*** ./src/pages/categories/index.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Page; });\n/* harmony import */ var _utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils/fetch-json.js */ \"./src/utils/fetch-json.js\");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\nclass Page {\n  constructor() {\n    _defineProperty(this, \"element\", void 0);\n\n    _defineProperty(this, \"components\", {});\n\n    _defineProperty(this, \"subElements\", {});\n  }\n\n  async render() {\n    // ? Вопрос насчет записи\n    const [response] = await Promise.all([this.getCategoriesData()]);\n    const element = document.createElement('div');\n    element.innerHTML = this.template;\n    this.element = element.firstElementChild;\n    this.subElements = this.getSubElements(this.element);\n    this.createCategorieWrap(response);\n    this.initEventListeners();\n    return this.element;\n  }\n\n  get template() {\n    return \"  \\n        <div class=\\\"categories\\\">\\n        <div class=\\\"content__top-panel\\\">\\n          <h1 class=\\\"page-title\\\">Categories</h1>\\n        </div>\\n        <div data-element=\\\"categoriesContainer\\\">\\n            <!-- Render categories menue here -->\\n        </div>\\n        </div>\\n      \";\n  }\n\n  async getCategoriesData() {\n    const url = this.getRequestLink('/api/rest/categories');\n    const request = await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(url);\n    return request;\n  }\n\n  getRequestLink(requestString) {\n    const newUrl = new URL(requestString, \"\".concat(\"https://course-js.javascript.ru/\"));\n    newUrl.searchParams.set('_sort', 'weight');\n    newUrl.searchParams.set('_refs', 'subcategory');\n    return newUrl.href;\n  }\n\n  createCategorieWrap(data = []) {\n    const {\n      categoriesContainer\n    } = this.subElements;\n    const categoriesMarkup = data.map(dataItem => {\n      return \"\\n            <div class=\\\"category\\\" data-id=\\\"\".concat(dataItem.id, \"\\\">\\n            <header class=\\\"category__header\\\">\\n                \").concat(dataItem.title, \"\\n            </header>\\n            <div class=\\\"category__body\\\">\\n                <div class=\\\"subcategory-list\\\">\\n                    <ul class=\\\"sortable-list\\\">\\n                        \").concat(this.getCategoriesListItem(dataItem), \"\\n                    </ul>\\n                </div>\\n            </div>\\n            </div>\");\n    }).join('');\n    categoriesContainer.innerHTML = categoriesMarkup;\n  }\n\n  getCategoriesListItem(data) {\n    const {\n      subcategories\n    } = data;\n    return subcategories.map(subcategory => {\n      return \"\\n            <li class=\\\"categories__sortable-list-item sortable-list__item\\\" data-grab-handle=\\\"\\\" data-id=\\\"\".concat(subcategory.id, \"\\\">\\n                <strong>\").concat(subcategory.title, \"</strong>\\n                <span><b>\").concat(subcategory.count, \"</b> products</span>\\n            </li>\");\n    }).join('');\n  }\n\n  getSubElements(element) {\n    const elements = element.querySelectorAll('[data-element]');\n    return [...elements].reduce((acc, item) => {\n      acc[item.dataset.element] = item;\n      return acc;\n    }, {});\n  }\n\n  initEventListeners() {}\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvY2F0ZWdvcmllcy9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9wYWdlcy9jYXRlZ29yaWVzL2luZGV4LmpzPzliMWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZldGNoSnNvbiBmcm9tICcuLi8uLi91dGlscy9mZXRjaC1qc29uLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhZ2Uge1xyXG4gIGVsZW1lbnQ7XHJcbiAgY29tcG9uZW50cyA9IHt9O1xyXG4gIHN1YkVsZW1lbnRzID0ge307XHJcblxyXG4gIGFzeW5jIHJlbmRlcigpIHtcclxuICAgIC8vID8g0JLQvtC/0YDQvtGBINC90LDRgdGH0LXRgiDQt9Cw0L/QuNGB0LhcclxuICAgIGNvbnN0IFtyZXNwb25zZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5nZXRDYXRlZ29yaWVzRGF0YSgpXSk7XHJcblxyXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLnRlbXBsYXRlO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZDtcclxuXHJcbiAgICB0aGlzLnN1YkVsZW1lbnRzID0gdGhpcy5nZXRTdWJFbGVtZW50cyh0aGlzLmVsZW1lbnQpO1xyXG4gICAgdGhpcy5jcmVhdGVDYXRlZ29yaWVXcmFwKHJlc3BvbnNlKTtcclxuICAgIHRoaXMuaW5pdEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdldCB0ZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBgICBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcmllc1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50X190b3AtcGFuZWxcIj5cclxuICAgICAgICAgIDxoMSBjbGFzcz1cInBhZ2UtdGl0bGVcIj5DYXRlZ29yaWVzPC9oMT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGRhdGEtZWxlbWVudD1cImNhdGVnb3JpZXNDb250YWluZXJcIj5cclxuICAgICAgICAgICAgPCEtLSBSZW5kZXIgY2F0ZWdvcmllcyBtZW51ZSBoZXJlIC0tPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICBgO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0Q2F0ZWdvcmllc0RhdGEoKSB7XHJcbiAgICBjb25zdCB1cmwgPSB0aGlzLmdldFJlcXVlc3RMaW5rKCcvYXBpL3Jlc3QvY2F0ZWdvcmllcycpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGF3YWl0IGZldGNoSnNvbih1cmwpO1xyXG4gICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgfVxyXG5cclxuICBnZXRSZXF1ZXN0TGluayhyZXF1ZXN0U3RyaW5nKSB7XHJcbiAgICBjb25zdCBuZXdVcmwgPSBuZXcgVVJMKHJlcXVlc3RTdHJpbmcsIGAke3Byb2Nlc3MuZW52LkJBQ0tFTkRfVVJMfWApO1xyXG4gICAgbmV3VXJsLnNlYXJjaFBhcmFtcy5zZXQoJ19zb3J0JywgJ3dlaWdodCcpO1xyXG4gICAgbmV3VXJsLnNlYXJjaFBhcmFtcy5zZXQoJ19yZWZzJywgJ3N1YmNhdGVnb3J5Jyk7XHJcblxyXG4gICAgcmV0dXJuIG5ld1VybC5ocmVmO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ2F0ZWdvcmllV3JhcChkYXRhID0gW10pIHtcclxuICAgIGNvbnN0IHsgY2F0ZWdvcmllc0NvbnRhaW5lciB9ID0gdGhpcy5zdWJFbGVtZW50cztcclxuXHJcbiAgICBjb25zdCBjYXRlZ29yaWVzTWFya3VwID0gZGF0YVxyXG4gICAgICAubWFwKGRhdGFJdGVtID0+IHtcclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnlcIiBkYXRhLWlkPVwiJHtkYXRhSXRlbS5pZH1cIj5cclxuICAgICAgICAgICAgPGhlYWRlciBjbGFzcz1cImNhdGVnb3J5X19oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICR7ZGF0YUl0ZW0udGl0bGV9XHJcbiAgICAgICAgICAgIDwvaGVhZGVyPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2F0ZWdvcnlfX2JvZHlcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdWJjYXRlZ29yeS1saXN0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPVwic29ydGFibGUtbGlzdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke3RoaXMuZ2V0Q2F0ZWdvcmllc0xpc3RJdGVtKGRhdGFJdGVtKX1cclxuICAgICAgICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5gO1xyXG4gICAgICB9KVxyXG4gICAgICAuam9pbignJyk7XHJcblxyXG4gICAgY2F0ZWdvcmllc0NvbnRhaW5lci5pbm5lckhUTUwgPSBjYXRlZ29yaWVzTWFya3VwO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2F0ZWdvcmllc0xpc3RJdGVtKGRhdGEpIHtcclxuICAgIGNvbnN0IHsgc3ViY2F0ZWdvcmllcyB9ID0gZGF0YTtcclxuXHJcbiAgICByZXR1cm4gc3ViY2F0ZWdvcmllc1xyXG4gICAgICAubWFwKHN1YmNhdGVnb3J5ID0+IHtcclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICA8bGkgY2xhc3M9XCJjYXRlZ29yaWVzX19zb3J0YWJsZS1saXN0LWl0ZW0gc29ydGFibGUtbGlzdF9faXRlbVwiIGRhdGEtZ3JhYi1oYW5kbGU9XCJcIiBkYXRhLWlkPVwiJHtzdWJjYXRlZ29yeS5pZH1cIj5cclxuICAgICAgICAgICAgICAgIDxzdHJvbmc+JHtzdWJjYXRlZ29yeS50aXRsZX08L3N0cm9uZz5cclxuICAgICAgICAgICAgICAgIDxzcGFuPjxiPiR7c3ViY2F0ZWdvcnkuY291bnR9PC9iPiBwcm9kdWN0czwvc3Bhbj5cclxuICAgICAgICAgICAgPC9saT5gO1xyXG4gICAgICB9KVxyXG4gICAgICAuam9pbignJyk7XHJcbiAgfVxyXG5cclxuICBnZXRTdWJFbGVtZW50cyhlbGVtZW50KSB7XHJcbiAgICBjb25zdCBlbGVtZW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtZWxlbWVudF0nKTtcclxuICAgIHJldHVybiBbLi4uZWxlbWVudHNdLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7XHJcbiAgICAgIGFjY1tpdGVtLmRhdGFzZXQuZWxlbWVudF0gPSBpdGVtO1xyXG4gICAgICByZXR1cm4gYWNjO1xyXG4gICAgfSwge30pO1xyXG4gIH1cclxuXHJcbiAgaW5pdEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFFQTtBQWFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5RkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/pages/categories/index.js\n");

/***/ })

})