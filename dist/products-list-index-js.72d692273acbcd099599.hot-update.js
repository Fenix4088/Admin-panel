webpackHotUpdate("products-list-index-js",{

/***/ "./src/components/product-form/index.js":
/*!**********************************************!*\
  !*** ./src/components/product-form/index.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ProductForm; });\n/* harmony import */ var _sortable_list_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sortable-list/index.js */ \"./src/components/sortable-list/index.js\");\n/* harmony import */ var _utils_escape_html_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/escape-html.js */ \"./src/utils/escape-html.js\");\n/* harmony import */ var _utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/fetch-json.js */ \"./src/utils/fetch-json.js\");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nclass ProductForm {\n  constructor(productId) {\n    _defineProperty(this, \"element\", void 0);\n\n    _defineProperty(this, \"subElements\", {});\n\n    _defineProperty(this, \"defaultFormData\", {\n      title: '',\n      description: '',\n      quantity: 1,\n      subcategory: '',\n      status: 1,\n      images: [],\n      price: 100,\n      discount: 0\n    });\n\n    _defineProperty(this, \"onSubmit\", event => {\n      event.preventDefault();\n      this.save();\n    });\n\n    _defineProperty(this, \"uploadImage\", () => {\n      const fileInput = document.createElement('input');\n      fileInput.type = 'file';\n      fileInput.accept = 'image/*';\n\n      fileInput.onchange = async () => {\n        const [file] = fileInput.files;\n\n        if (file) {\n          const formData = new FormData();\n          const {\n            uploadImage,\n            imageListContainer\n          } = this.subElements;\n          formData.append('image', file);\n          uploadImage.classList.add('is-loading');\n          uploadImage.disabled = true;\n          const result = await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])('https://api.imgur.com/3/image', {\n            method: 'POST',\n            headers: {\n              Authorization: \"Client-ID \".concat(\"28aaa2e823b03b1\")\n            },\n            body: formData\n          });\n          imageListContainer.firstElementChild.append(this.getImageItem(result.data.link, file.name));\n          uploadImage.classList.remove('is-loading');\n          uploadImage.disabled = false; // Remove input from body\n\n          fileInput.remove();\n        }\n      }; // must be in body for IE\n\n\n      fileInput.hidden = true;\n      document.body.appendChild(fileInput);\n      fileInput.click();\n    });\n\n    this.productId = productId;\n  }\n\n  template() {\n    return \"\\n      <div class=\\\"product-form\\\">\\n\\n      <form data-element=\\\"productForm\\\" class=\\\"form-grid\\\">\\n        <div class=\\\"form-group form-group__half_left\\\">\\n          <fieldset>\\n            <label class=\\\"form-label\\\">\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430</label>\\n            <input required\\n              id=\\\"title\\\"\\n              value=\\\"\\\"\\n              type=\\\"text\\\"\\n              name=\\\"title\\\"\\n              class=\\\"form-control\\\"\\n              placeholder=\\\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\\">\\n          </fieldset>\\n        </div>\\n\\n        <div class=\\\"form-group form-group__wide\\\">\\n          <label class=\\\"form-label\\\">\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435</label>\\n          <textarea required\\n            id=\\\"description\\\"\\n            class=\\\"form-control\\\"\\n            name=\\\"description\\\"\\n            placeholder=\\\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\\"></textarea>\\n        </div>\\n\\n        <div class=\\\"form-group form-group__wide\\\">\\n          <label class=\\\"form-label\\\">\\u0424\\u043E\\u0442\\u043E</label>\\n\\n          <div data-element=\\\"imageListContainer\\\"></div>\\n\\n          <button data-element=\\\"uploadImage\\\" type=\\\"button\\\" class=\\\"button-primary-outline\\\">\\n            <span>\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C</span>\\n          </button>\\n        </div>\\n\\n        <div class=\\\"form-group form-group__half_left\\\">\\n          <label class=\\\"form-label\\\">\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F</label>\\n            \".concat(this.createCategoriesSelect(), \"\\n        </div>\\n\\n        <div class=\\\"form-group form-group__half_left form-group__two-col\\\">\\n          <fieldset>\\n            <label class=\\\"form-label\\\">\\u0426\\u0435\\u043D\\u0430 ($)</label>\\n            <input required\\n              id=\\\"price\\\"\\n              value=\\\"\\\"\\n              type=\\\"number\\\"\\n              name=\\\"price\\\"\\n              class=\\\"form-control\\\"\\n              placeholder=\\\"\").concat(this.defaultFormData.price, \"\\\">\\n          </fieldset>\\n          <fieldset>\\n            <label class=\\\"form-label\\\">\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430 ($)</label>\\n            <input required\\n              id=\\\"discount\\\"\\n              value=\\\"\\\"\\n              type=\\\"number\\\"\\n              name=\\\"discount\\\"\\n              class=\\\"form-control\\\"\\n              placeholder=\\\"\").concat(this.defaultFormData.discount, \"\\\">\\n          </fieldset>\\n        </div>\\n\\n        <div class=\\\"form-group form-group__part-half\\\">\\n          <label class=\\\"form-label\\\">\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E</label>\\n          <input required\\n            id=\\\"quantity\\\"\\n            value=\\\"\\\"\\n            type=\\\"number\\\"\\n            class=\\\"form-control\\\"\\n            name=\\\"quantity\\\"\\n            placeholder=\\\"\").concat(this.defaultFormData.quantity, \"\\\">\\n        </div>\\n\\n        <div class=\\\"form-group form-group__part-half\\\">\\n          <label class=\\\"form-label\\\">\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441</label>\\n          <select id=\\\"status\\\" class=\\\"form-control\\\" name=\\\"status\\\">\\n            <option value=\\\"1\\\">\\u0410\\u043A\\u0442\\u0438\\u0432\\u0435\\u043D</option>\\n            <option value=\\\"0\\\">\\u041D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u0435\\u043D</option>\\n          </select>\\n        </div>\\n\\n        <div class=\\\"form-buttons\\\">\\n          <button type=\\\"submit\\\" name=\\\"save\\\" class=\\\"button-primary-outline\\\">\\n            \").concat(this.productId ? 'Сохранить' : 'Добавить', \" \\u0442\\u043E\\u0432\\u0430\\u0440\\n          </button>\\n        </div>\\n      </form>\\n    </div>\\n    \");\n  }\n\n  async render() {\n    const categoriesPromise = this.loadCategoriesList();\n    const productPromise = this.productId ? this.loadProductData(this.productId) : Promise.resolve([this.defaultFormData]);\n    const [categoriesData, productResponse] = await Promise.all([categoriesPromise, productPromise]);\n    const [productData] = productResponse;\n    this.formData = productData;\n    this.categories = categoriesData;\n    this.renderForm();\n    this.setFormData();\n    this.createImagesList();\n    this.initEventListeners();\n    return this.element;\n  }\n\n  renderForm() {\n    const element = document.createElement('div');\n    element.innerHTML = this.formData ? this.template() : this.getEmptyTemplate();\n    this.element = element.firstElementChild;\n    this.subElements = this.getSubElements(element);\n  }\n\n  getEmptyTemplate() {\n    return \"<div>\\n      <h1 class=\\\"page-title\\\">\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u0430</h1>\\n      <p>\\u0418\\u0437\\u0432\\u0438\\u043D\\u0438\\u0442\\u0435, \\u0434\\u0430\\u043D\\u043D\\u044B\\u0439 \\u0442\\u043E\\u0432\\u0430\\u0440 \\u043D\\u0435 \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442</p>\\n    </div>\";\n  }\n\n  async save() {\n    const product = this.getFormData();\n    const result = await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\"\".concat(\"https://course-js.javascript.ru/\", \"api/rest/products\"), {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(product)\n    });\n    this.dispatchEvent(result.id);\n  }\n\n  getFormData() {\n    const {\n      productForm,\n      imageListContainer\n    } = this.subElements;\n    const excludedFields = ['images'];\n    const formatToNumber = ['price', 'quantity', 'discount', 'status'];\n    const fields = Object.keys(this.defaultFormData).filter(item => !excludedFields.includes(item));\n    const values = {};\n\n    for (const field of fields) {\n      values[field] = formatToNumber.includes(field) ? parseInt(productForm[field].value) : productForm[field].value;\n    }\n\n    const imagesHTMLCollection = imageListContainer.querySelectorAll('.sortable-table__cell-img');\n    values.images = [];\n    values.id = this.productId;\n\n    for (const image of imagesHTMLCollection) {\n      values.images.push({\n        url: image.src,\n        source: image.alt\n      });\n    }\n\n    return values;\n  }\n\n  dispatchEvent(id) {\n    const event = this.productId ? new CustomEvent('product-updated', {\n      detail: id\n    }) : new CustomEvent('product-saved');\n    this.element.dispatchEvent(event);\n  }\n\n  setFormData() {\n    const {\n      productForm\n    } = this.subElements;\n    const excludedFields = ['images'];\n    const fields = Object.keys(this.defaultFormData).filter(item => !excludedFields.includes(item));\n    fields.forEach(item => {\n      const element = productForm.querySelector(\"#\".concat(item));\n      element.value = this.formData[item] || this.defaultFormData[item];\n    });\n  }\n\n  async loadProductData(productId) {\n    return await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\"\".concat(\"https://course-js.javascript.ru/\", \"api/rest/products?id=\").concat(productId));\n  }\n\n  async loadCategoriesList() {\n    return await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\"\".concat(\"https://course-js.javascript.ru/\", \"api/rest/categories?_sort=weight&_refs=subcategory\"));\n  }\n\n  createCategoriesSelect() {\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = '<select class=\"form-control\" id=\"subcategory\" name=\"subcategory\"></select>';\n    const select = wrapper.firstElementChild;\n\n    for (const category of this.categories) {\n      for (const child of category.subcategories) {\n        select.append(new Option(\"\".concat(category.title, \" > \").concat(child.title), child.id));\n      }\n    }\n\n    return select.outerHTML;\n  }\n\n  getSubElements(element) {\n    const subElements = {};\n    const elements = element.querySelectorAll('[data-element]');\n\n    for (const item of elements) {\n      subElements[item.dataset.element] = item;\n    }\n\n    return subElements;\n  }\n\n  createImagesList() {\n    const {\n      imageListContainer\n    } = this.subElements;\n    const {\n      images\n    } = this.formData;\n    const items = images.map(({\n      url,\n      source\n    }) => this.getImageItem(url, source));\n    const sortableList = new _sortable_list_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n      items\n    });\n    imageListContainer.append(sortableList.element);\n  }\n\n  getImageItem(url, name) {\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = \"\\n      <li class=\\\"products-edit__imagelist-item sortable-list__item\\\">\\n        <span>\\n          <img src=\\\"icon-grab.svg\\\" data-grab-handle alt=\\\"grab\\\">\\n          <img class=\\\"sortable-table__cell-img\\\" alt=\\\"\".concat(Object(_utils_escape_html_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(name), \"\\\" src=\\\"\").concat(Object(_utils_escape_html_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(url), \"\\\">\\n          <span>\").concat(Object(_utils_escape_html_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(name), \"</span>\\n        </span>\\n\\n        <button type=\\\"button\\\">\\n          <img src=\\\"icon-trash.svg\\\" alt=\\\"delete\\\" data-delete-handle>\\n        </button>\\n      </li>\");\n    return wrapper.firstElementChild;\n  }\n\n  initEventListeners() {\n    const {\n      productForm,\n      uploadImage\n    } = this.subElements;\n    productForm.addEventListener('submit', this.onSubmit);\n    uploadImage.addEventListener('click', this.uploadImage);\n  }\n\n  destroy() {\n    this.remove();\n    this.element = null;\n    this.subElements = null;\n  }\n\n  remove() {\n    this.element.remove();\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9wcm9kdWN0LWZvcm0vaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9wcm9kdWN0LWZvcm0vaW5kZXguanM/NWJkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU29ydGFibGVMaXN0IGZyb20gJy4uL3NvcnRhYmxlLWxpc3QvaW5kZXguanMnO1xyXG5pbXBvcnQgZXNjYXBlSHRtbCBmcm9tICcuLi8uLi91dGlscy9lc2NhcGUtaHRtbC5qcyc7XHJcbmltcG9ydCBmZXRjaEpzb24gZnJvbSAnLi4vLi4vdXRpbHMvZmV0Y2gtanNvbi5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9kdWN0Rm9ybSB7XHJcbiAgZWxlbWVudDtcclxuICBzdWJFbGVtZW50cyA9IHt9O1xyXG4gIGRlZmF1bHRGb3JtRGF0YSA9IHtcclxuICAgIHRpdGxlOiAnJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgIHF1YW50aXR5OiAxLFxyXG4gICAgc3ViY2F0ZWdvcnk6ICcnLFxyXG4gICAgc3RhdHVzOiAxLFxyXG4gICAgaW1hZ2VzOiBbXSxcclxuICAgIHByaWNlOiAxMDAsXHJcbiAgICBkaXNjb3VudDogMFxyXG4gIH07XHJcblxyXG4gIG9uU3VibWl0ID0gZXZlbnQgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICB0aGlzLnNhdmUoKTtcclxuICB9O1xyXG5cclxuICB1cGxvYWRJbWFnZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcblxyXG4gICAgZmlsZUlucHV0LnR5cGUgPSAnZmlsZSc7XHJcbiAgICBmaWxlSW5wdXQuYWNjZXB0ID0gJ2ltYWdlLyonO1xyXG5cclxuICAgIGZpbGVJbnB1dC5vbmNoYW5nZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgW2ZpbGVdID0gZmlsZUlucHV0LmZpbGVzO1xyXG5cclxuICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGNvbnN0IHt1cGxvYWRJbWFnZSwgaW1hZ2VMaXN0Q29udGFpbmVyfSA9IHRoaXMuc3ViRWxlbWVudHM7XHJcblxyXG4gICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaW1hZ2UnLCBmaWxlKTtcclxuXHJcbiAgICAgICAgdXBsb2FkSW1hZ2UuY2xhc3NMaXN0LmFkZCgnaXMtbG9hZGluZycpO1xyXG4gICAgICAgIHVwbG9hZEltYWdlLmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZmV0Y2hKc29uKCdodHRwczovL2FwaS5pbWd1ci5jb20vMy9pbWFnZScsIHtcclxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQ2xpZW50LUlEICR7cHJvY2Vzcy5lbnYuSU1HVVJfQ0xJRU5UX0lEfWBcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBib2R5OiBmb3JtRGF0YSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW1hZ2VMaXN0Q29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkLmFwcGVuZCh0aGlzLmdldEltYWdlSXRlbShyZXN1bHQuZGF0YS5saW5rLCBmaWxlLm5hbWUpKTtcclxuXHJcbiAgICAgICAgdXBsb2FkSW1hZ2UuY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xyXG4gICAgICAgIHVwbG9hZEltYWdlLmRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBpbnB1dCBmcm9tIGJvZHlcclxuICAgICAgICBmaWxlSW5wdXQucmVtb3ZlKCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gbXVzdCBiZSBpbiBib2R5IGZvciBJRVxyXG4gICAgZmlsZUlucHV0LmhpZGRlbiA9IHRydWU7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZpbGVJbnB1dCk7XHJcbiAgICBmaWxlSW5wdXQuY2xpY2soKTtcclxuICB9O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcm9kdWN0SWQpIHtcclxuICAgIHRoaXMucHJvZHVjdElkID0gcHJvZHVjdElkO1xyXG4gIH1cclxuXHJcbiAgdGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gYFxyXG4gICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdC1mb3JtXCI+XHJcblxyXG4gICAgICA8Zm9ybSBkYXRhLWVsZW1lbnQ9XCJwcm9kdWN0Rm9ybVwiIGNsYXNzPVwiZm9ybS1ncmlkXCI+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgZm9ybS1ncm91cF9faGFsZl9sZWZ0XCI+XHJcbiAgICAgICAgICA8ZmllbGRzZXQ+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj7QndCw0LfQstCw0L3QuNC1INGC0L7QstCw0YDQsDwvbGFiZWw+XHJcbiAgICAgICAgICAgIDxpbnB1dCByZXF1aXJlZFxyXG4gICAgICAgICAgICAgIGlkPVwidGl0bGVcIlxyXG4gICAgICAgICAgICAgIHZhbHVlPVwiXCJcclxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXHJcbiAgICAgICAgICAgICAgbmFtZT1cInRpdGxlXCJcclxuICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCLQndCw0LfQstCw0L3QuNC1INGC0L7QstCw0YDQsFwiPlxyXG4gICAgICAgICAgPC9maWVsZHNldD5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgZm9ybS1ncm91cF9fd2lkZVwiPlxyXG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCe0L/QuNGB0LDQvdC40LU8L2xhYmVsPlxyXG4gICAgICAgICAgPHRleHRhcmVhIHJlcXVpcmVkXHJcbiAgICAgICAgICAgIGlkPVwiZGVzY3JpcHRpb25cIlxyXG4gICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICAgIG5hbWU9XCJkZXNjcmlwdGlvblwiXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwi0J7Qv9C40YHQsNC90LjQtSDRgtC+0LLQsNGA0LBcIj48L3RleHRhcmVhPlxyXG4gICAgICAgIDwvZGl2PlxyXG5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBmb3JtLWdyb3VwX193aWRlXCI+XHJcbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0KTQvtGC0L48L2xhYmVsPlxyXG5cclxuICAgICAgICAgIDxkaXYgZGF0YS1lbGVtZW50PVwiaW1hZ2VMaXN0Q29udGFpbmVyXCI+PC9kaXY+XHJcblxyXG4gICAgICAgICAgPGJ1dHRvbiBkYXRhLWVsZW1lbnQ9XCJ1cGxvYWRJbWFnZVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ1dHRvbi1wcmltYXJ5LW91dGxpbmVcIj5cclxuICAgICAgICAgICAgPHNwYW4+0JfQsNCz0YDRg9C30LjRgtGMPC9zcGFuPlxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGZvcm0tZ3JvdXBfX2hhbGZfbGVmdFwiPlxyXG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCa0LDRgtC10LPQvtGA0LjRjzwvbGFiZWw+XHJcbiAgICAgICAgICAgICR7dGhpcy5jcmVhdGVDYXRlZ29yaWVzU2VsZWN0KCl9XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGZvcm0tZ3JvdXBfX2hhbGZfbGVmdCBmb3JtLWdyb3VwX190d28tY29sXCI+XHJcbiAgICAgICAgICA8ZmllbGRzZXQ+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj7QptC10L3QsCAoJCk8L2xhYmVsPlxyXG4gICAgICAgICAgICA8aW5wdXQgcmVxdWlyZWRcclxuICAgICAgICAgICAgICBpZD1cInByaWNlXCJcclxuICAgICAgICAgICAgICB2YWx1ZT1cIlwiXHJcbiAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgbmFtZT1cInByaWNlXCJcclxuICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIke3RoaXMuZGVmYXVsdEZvcm1EYXRhLnByaWNlfVwiPlxyXG4gICAgICAgICAgPC9maWVsZHNldD5cclxuICAgICAgICAgIDxmaWVsZHNldD5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCh0LrQuNC00LrQsCAoJCk8L2xhYmVsPlxyXG4gICAgICAgICAgICA8aW5wdXQgcmVxdWlyZWRcclxuICAgICAgICAgICAgICBpZD1cImRpc2NvdW50XCJcclxuICAgICAgICAgICAgICB2YWx1ZT1cIlwiXHJcbiAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgbmFtZT1cImRpc2NvdW50XCJcclxuICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIke3RoaXMuZGVmYXVsdEZvcm1EYXRhLmRpc2NvdW50fVwiPlxyXG4gICAgICAgICAgPC9maWVsZHNldD5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgZm9ybS1ncm91cF9fcGFydC1oYWxmXCI+XHJcbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0JrQvtC70LjRh9C10YHRgtCy0L48L2xhYmVsPlxyXG4gICAgICAgICAgPGlucHV0IHJlcXVpcmVkXHJcbiAgICAgICAgICAgIGlkPVwicXVhbnRpdHlcIlxyXG4gICAgICAgICAgICB2YWx1ZT1cIlwiXHJcbiAgICAgICAgICAgIHR5cGU9XCJudW1iZXJcIlxyXG4gICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICAgIG5hbWU9XCJxdWFudGl0eVwiXHJcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiJHt0aGlzLmRlZmF1bHRGb3JtRGF0YS5xdWFudGl0eX1cIj5cclxuICAgICAgICA8L2Rpdj5cclxuXHJcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgZm9ybS1ncm91cF9fcGFydC1oYWxmXCI+XHJcbiAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJmb3JtLWxhYmVsXCI+0KHRgtCw0YLRg9GBPC9sYWJlbD5cclxuICAgICAgICAgIDxzZWxlY3QgaWQ9XCJzdGF0dXNcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIG5hbWU9XCJzdGF0dXNcIj5cclxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjFcIj7QkNC60YLQuNCy0LXQvTwvb3B0aW9uPlxyXG4gICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMFwiPtCd0LXQsNC60YLQuNCy0LXQvTwvb3B0aW9uPlxyXG4gICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgPC9kaXY+XHJcblxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWJ1dHRvbnNcIj5cclxuICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIG5hbWU9XCJzYXZlXCIgY2xhc3M9XCJidXR0b24tcHJpbWFyeS1vdXRsaW5lXCI+XHJcbiAgICAgICAgICAgICR7dGhpcy5wcm9kdWN0SWQgPyAn0KHQvtGF0YDQsNC90LjRgtGMJyA6ICfQlNC+0LHQsNCy0LjRgtGMJ30g0YLQvtCy0LDRgFxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZm9ybT5cclxuICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIGFzeW5jIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IGNhdGVnb3JpZXNQcm9taXNlID0gdGhpcy5sb2FkQ2F0ZWdvcmllc0xpc3QoKTtcclxuICAgIGNvbnN0IHByb2R1Y3RQcm9taXNlID0gdGhpcy5wcm9kdWN0SWRcclxuICAgICAgPyB0aGlzLmxvYWRQcm9kdWN0RGF0YSh0aGlzLnByb2R1Y3RJZClcclxuICAgICAgOiBQcm9taXNlLnJlc29sdmUoW3RoaXMuZGVmYXVsdEZvcm1EYXRhXSk7XHJcblxyXG4gICAgY29uc3QgW2NhdGVnb3JpZXNEYXRhLCBwcm9kdWN0UmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW2NhdGVnb3JpZXNQcm9taXNlLCBwcm9kdWN0UHJvbWlzZV0pO1xyXG4gICAgY29uc3QgW3Byb2R1Y3REYXRhXSA9IHByb2R1Y3RSZXNwb25zZTtcclxuXHJcbiAgICB0aGlzLmZvcm1EYXRhID0gcHJvZHVjdERhdGE7XHJcbiAgICB0aGlzLmNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzRGF0YTtcclxuXHJcbiAgICB0aGlzLnJlbmRlckZvcm0oKTtcclxuICAgIHRoaXMuc2V0Rm9ybURhdGEoKTtcclxuICAgIHRoaXMuY3JlYXRlSW1hZ2VzTGlzdCgpO1xyXG4gICAgdGhpcy5pbml0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyRm9ybSgpIHtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IHRoaXMuZm9ybURhdGFcclxuICAgICAgPyB0aGlzLnRlbXBsYXRlKClcclxuICAgICAgOiB0aGlzLmdldEVtcHR5VGVtcGxhdGUoKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgdGhpcy5zdWJFbGVtZW50cyA9IHRoaXMuZ2V0U3ViRWxlbWVudHMoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBnZXRFbXB0eVRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGA8ZGl2PlxyXG4gICAgICA8aDEgY2xhc3M9XCJwYWdlLXRpdGxlXCI+0KHRgtGA0LDQvdC40YbQsCDQvdC1INC90LDQudC00LXQvdCwPC9oMT5cclxuICAgICAgPHA+0JjQt9Cy0LjQvdC40YLQtSwg0LTQsNC90L3Ri9C5INGC0L7QstCw0YAg0L3QtSDRgdGD0YnQtdGB0YLQstGD0LXRgjwvcD5cclxuICAgIDwvZGl2PmA7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzYXZlKCkge1xyXG4gICAgY29uc3QgcHJvZHVjdCA9IHRoaXMuZ2V0Rm9ybURhdGEoKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoSnNvbihgJHtwcm9jZXNzLmVudi5CQUNLRU5EX1VSTH1hcGkvcmVzdC9wcm9kdWN0c2AsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShwcm9kdWN0KVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KHJlc3VsdC5pZCk7XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtRGF0YSgpIHtcclxuICAgIGNvbnN0IHtwcm9kdWN0Rm9ybSwgaW1hZ2VMaXN0Q29udGFpbmVyfSA9IHRoaXMuc3ViRWxlbWVudHM7XHJcbiAgICBjb25zdCBleGNsdWRlZEZpZWxkcyA9IFsnaW1hZ2VzJ107XHJcbiAgICBjb25zdCBmb3JtYXRUb051bWJlciA9IFsncHJpY2UnLCAncXVhbnRpdHknLCAnZGlzY291bnQnLCAnc3RhdHVzJ107XHJcbiAgICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLmRlZmF1bHRGb3JtRGF0YSkuZmlsdGVyKGl0ZW0gPT4gIWV4Y2x1ZGVkRmllbGRzLmluY2x1ZGVzKGl0ZW0pKTtcclxuICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xyXG5cclxuICAgIGZvciAoY29uc3QgZmllbGQgb2YgZmllbGRzKSB7XHJcbiAgICAgIHZhbHVlc1tmaWVsZF0gPSBmb3JtYXRUb051bWJlci5pbmNsdWRlcyhmaWVsZClcclxuICAgICAgICA/IHBhcnNlSW50KHByb2R1Y3RGb3JtW2ZpZWxkXS52YWx1ZSlcclxuICAgICAgICA6IHByb2R1Y3RGb3JtW2ZpZWxkXS52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbWFnZXNIVE1MQ29sbGVjdGlvbiA9IGltYWdlTGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc29ydGFibGUtdGFibGVfX2NlbGwtaW1nJyk7XHJcblxyXG4gICAgdmFsdWVzLmltYWdlcyA9IFtdO1xyXG4gICAgdmFsdWVzLmlkID0gdGhpcy5wcm9kdWN0SWQ7XHJcblxyXG4gICAgZm9yIChjb25zdCBpbWFnZSBvZiBpbWFnZXNIVE1MQ29sbGVjdGlvbikge1xyXG4gICAgICB2YWx1ZXMuaW1hZ2VzLnB1c2goe1xyXG4gICAgICAgIHVybDogaW1hZ2Uuc3JjLFxyXG4gICAgICAgIHNvdXJjZTogaW1hZ2UuYWx0XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgfVxyXG5cclxuICBkaXNwYXRjaEV2ZW50KGlkKSB7XHJcbiAgICBjb25zdCBldmVudCA9IHRoaXMucHJvZHVjdElkXHJcbiAgICAgID8gbmV3IEN1c3RvbUV2ZW50KCdwcm9kdWN0LXVwZGF0ZWQnLCB7ZGV0YWlsOiBpZH0pXHJcbiAgICAgIDogbmV3IEN1c3RvbUV2ZW50KCdwcm9kdWN0LXNhdmVkJyk7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgc2V0Rm9ybURhdGEoKSB7XHJcbiAgICBjb25zdCB7cHJvZHVjdEZvcm19ID0gdGhpcy5zdWJFbGVtZW50cztcclxuICAgIGNvbnN0IGV4Y2x1ZGVkRmllbGRzID0gWydpbWFnZXMnXTtcclxuICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHRoaXMuZGVmYXVsdEZvcm1EYXRhKS5maWx0ZXIoaXRlbSA9PiAhZXhjbHVkZWRGaWVsZHMuaW5jbHVkZXMoaXRlbSkpO1xyXG5cclxuICAgIGZpZWxkcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gcHJvZHVjdEZvcm0ucXVlcnlTZWxlY3RvcihgIyR7aXRlbX1gKTtcclxuXHJcbiAgICAgIGVsZW1lbnQudmFsdWUgPSB0aGlzLmZvcm1EYXRhW2l0ZW1dIHx8IHRoaXMuZGVmYXVsdEZvcm1EYXRhW2l0ZW1dO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkUHJvZHVjdERhdGEocHJvZHVjdElkKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgZmV0Y2hKc29uKGAke3Byb2Nlc3MuZW52LkJBQ0tFTkRfVVJMfWFwaS9yZXN0L3Byb2R1Y3RzP2lkPSR7cHJvZHVjdElkfWApO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgbG9hZENhdGVnb3JpZXNMaXN0KCkge1xyXG4gICAgcmV0dXJuIGF3YWl0IGZldGNoSnNvbihgJHtwcm9jZXNzLmVudi5CQUNLRU5EX1VSTH1hcGkvcmVzdC9jYXRlZ29yaWVzP19zb3J0PXdlaWdodCZfcmVmcz1zdWJjYXRlZ29yeWApO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ2F0ZWdvcmllc1NlbGVjdCgpIHtcclxuICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICB3cmFwcGVyLmlubmVySFRNTCA9ICc8c2VsZWN0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJzdWJjYXRlZ29yeVwiIG5hbWU9XCJzdWJjYXRlZ29yeVwiPjwvc2VsZWN0Pic7XHJcblxyXG4gICAgY29uc3Qgc2VsZWN0ID0gd3JhcHBlci5maXJzdEVsZW1lbnRDaGlsZDtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGNhdGVnb3J5IG9mIHRoaXMuY2F0ZWdvcmllcykge1xyXG4gICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGNhdGVnb3J5LnN1YmNhdGVnb3JpZXMpIHtcclxuICAgICAgICBzZWxlY3QuYXBwZW5kKG5ldyBPcHRpb24oYCR7Y2F0ZWdvcnkudGl0bGV9ID4gJHtjaGlsZC50aXRsZX1gLCBjaGlsZC5pZCkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHNlbGVjdC5vdXRlckhUTUw7XHJcbiAgfVxyXG5cclxuICBnZXRTdWJFbGVtZW50cyhlbGVtZW50KSB7XHJcbiAgICBjb25zdCBzdWJFbGVtZW50cyA9IHt9O1xyXG4gICAgY29uc3QgZWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWVsZW1lbnRdJyk7XHJcblxyXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGVsZW1lbnRzKSB7XHJcbiAgICAgIHN1YkVsZW1lbnRzW2l0ZW0uZGF0YXNldC5lbGVtZW50XSA9IGl0ZW07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHN1YkVsZW1lbnRzO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlSW1hZ2VzTGlzdCgpIHtcclxuICAgIGNvbnN0IHtpbWFnZUxpc3RDb250YWluZXJ9ID0gdGhpcy5zdWJFbGVtZW50cztcclxuICAgIGNvbnN0IHtpbWFnZXN9ID0gdGhpcy5mb3JtRGF0YTtcclxuXHJcbiAgICBjb25zdCBpdGVtcyA9IGltYWdlcy5tYXAoKHt1cmwsIHNvdXJjZX0pID0+IHRoaXMuZ2V0SW1hZ2VJdGVtKHVybCwgc291cmNlKSk7XHJcblxyXG4gICAgY29uc3Qgc29ydGFibGVMaXN0ID0gbmV3IFNvcnRhYmxlTGlzdCh7XHJcbiAgICAgIGl0ZW1zXHJcbiAgICB9KTtcclxuXHJcbiAgICBpbWFnZUxpc3RDb250YWluZXIuYXBwZW5kKHNvcnRhYmxlTGlzdC5lbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGdldEltYWdlSXRlbSh1cmwsIG5hbWUpIHtcclxuICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICB3cmFwcGVyLmlubmVySFRNTCA9IGBcclxuICAgICAgPGxpIGNsYXNzPVwicHJvZHVjdHMtZWRpdF9faW1hZ2VsaXN0LWl0ZW0gc29ydGFibGUtbGlzdF9faXRlbVwiPlxyXG4gICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCJpY29uLWdyYWIuc3ZnXCIgZGF0YS1ncmFiLWhhbmRsZSBhbHQ9XCJncmFiXCI+XHJcbiAgICAgICAgICA8aW1nIGNsYXNzPVwic29ydGFibGUtdGFibGVfX2NlbGwtaW1nXCIgYWx0PVwiJHtlc2NhcGVIdG1sKG5hbWUpfVwiIHNyYz1cIiR7ZXNjYXBlSHRtbCh1cmwpfVwiPlxyXG4gICAgICAgICAgPHNwYW4+JHtlc2NhcGVIdG1sKG5hbWUpfTwvc3Bhbj5cclxuICAgICAgICA8L3NwYW4+XHJcblxyXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiPlxyXG4gICAgICAgICAgPGltZyBzcmM9XCJpY29uLXRyYXNoLnN2Z1wiIGFsdD1cImRlbGV0ZVwiIGRhdGEtZGVsZXRlLWhhbmRsZT5cclxuICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgPC9saT5gO1xyXG5cclxuICAgIHJldHVybiB3cmFwcGVyLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gIH1cclxuXHJcbiAgaW5pdEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3Qge3Byb2R1Y3RGb3JtLCB1cGxvYWRJbWFnZX0gPSB0aGlzLnN1YkVsZW1lbnRzO1xyXG5cclxuICAgIHByb2R1Y3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMub25TdWJtaXQpO1xyXG4gICAgdXBsb2FkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnVwbG9hZEltYWdlKTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcclxuICAgIHRoaXMuc3ViRWxlbWVudHMgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlKCkge1xyXG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQThEQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUExREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUEwREE7QUEvQ0E7QUFFQTtBQUNBO0FBQ0E7QUEyQ0E7QUF6Q0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQVFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBYUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0VkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/components/product-form/index.js\n");

/***/ }),

/***/ "./src/pages/products/list/index.js":
/*!******************************************!*\
  !*** ./src/pages/products/list/index.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Page; });\n!(function webpackMissingModule() { var e = new Error(\"Cannot find module ''\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n/* harmony import */ var _components_product_form__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/product-form */ \"./src/components/product-form/index.js\");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\nclass Page {\n  constructor() {\n    _defineProperty(this, \"element\", void 0);\n\n    _defineProperty(this, \"subElements\", {});\n\n    _defineProperty(this, \"components\", {});\n  }\n\n  async render() {\n    const element = document.createElement('div');\n    element.innerHTML = this.template;\n    this.element = element.firstElementChild;\n    this.subElements = this.getSubElements(this.element);\n    console.log(this.subElements); // this.initComponents();\n    // await this.renderComponents();\n\n    return this.element;\n  }\n\n  get template() {\n    return \"\\n    <div class=\\\"products-list\\\">\\n      <div class=\\\"content__top-panel\\\">\\n        <h1 class=\\\"page-title\\\">\\u0422\\u043E\\u0432\\u0430\\u0440\\u044B</h1>\\n        <a href=\\\"/products/add\\\" class=\\\"button-primary\\\">\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0442\\u043E\\u0432\\u0430\\u0440</a>\\n      </div>\\n      <div class=\\\"content-box content-box_small\\\">\\n      <form class=\\\"form-inline\\\">\\n          <div class=\\\"form-group\\\">\\n            <label class=\\\"form-label\\\">\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E:</label>\\n            <input type=\\\"text\\\" data-element=\\\"filterName\\\" class=\\\"form-control\\\" placeholder=\\\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\\">\\n          </div>\\n          <div class=\\\"form-group\\\" data-element=\\\"sliderContainer\\\">\\n            <label class=\\\"form-label\\\">\\u0426\\u0435\\u043D\\u0430:</label>\\n              <!-- //! DoubleSlider -->\\n          </div>\\n          <div class=\\\"form-group\\\">\\n            <label class=\\\"form-label\\\">\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441:</label>\\n            <select class=\\\"form-control\\\" data-element=\\\"filterStatus\\\">\\n              <option value=\\\"\\\" selected=\\\"\\\">\\u041B\\u044E\\u0431\\u043E\\u0439</option>\\n              <option value=\\\"1\\\">\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0439</option>\\n              <option value=\\\"0\\\">\\u041D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u044B\\u0439</option>\\n            </select>\\n          </div>\\n        </form>\\n      </div>\\n      <div data-element=\\\"productsContainer\\\" class=\\\"products-list__container\\\">\\n        <!--//! SortableTable-->\\n      </div>\\n    </div>\\n    \";\n  }\n\n  initComponents() {\n    const productId = '101-planset-lenovo-yt3-x90l-64-gb-3g-lte-cernyj';\n    this.components.productFrom = new _components_product_form__WEBPACK_IMPORTED_MODULE_1__[\"default\"](productId);\n  }\n\n  async renderComponents() {\n    const element = await this.components.productFrom.render();\n    this.element.append(element);\n  }\n\n  getSubElements(element) {\n    const elements = element.querySelectorAll('[data-element]');\n    return [...elements].reduce((acc, next) => {\n      acc[next.dataset.element] = next;\n      return acc;\n    }, {});\n  }\n\n  destroy() {\n    for (const component of Object.values(this.components)) {\n      component.destroy();\n    }\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcGFnZXMvcHJvZHVjdHMvbGlzdC9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9wYWdlcy9wcm9kdWN0cy9saXN0L2luZGV4LmpzPzQ5YjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZldGNoSnNvbiBmcm9tIFwiXCJcclxuaW1wb3J0IFByb2R1Y3RGb3JtIGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvcHJvZHVjdC1mb3JtJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhZ2Uge1xyXG4gIGVsZW1lbnQ7XHJcbiAgc3ViRWxlbWVudHMgPSB7fTtcclxuICBjb21wb25lbnRzID0ge307XHJcblxyXG4gIGFzeW5jIHJlbmRlcigpIHtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHJcbiAgICBlbGVtZW50LmlubmVySFRNTCA9IHRoaXMudGVtcGxhdGU7XHJcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkO1xyXG5cclxuICAgIHRoaXMuc3ViRWxlbWVudHMgPSB0aGlzLmdldFN1YkVsZW1lbnRzKHRoaXMuZWxlbWVudCk7XHJcblxyXG4gICAgY29uc29sZS5sb2codGhpcy5zdWJFbGVtZW50cyk7XHJcbiAgICAvLyB0aGlzLmluaXRDb21wb25lbnRzKCk7XHJcbiAgICAvLyBhd2FpdCB0aGlzLnJlbmRlckNvbXBvbmVudHMoKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0IHRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGBcclxuICAgIDxkaXYgY2xhc3M9XCJwcm9kdWN0cy1saXN0XCI+XHJcbiAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50X190b3AtcGFuZWxcIj5cclxuICAgICAgICA8aDEgY2xhc3M9XCJwYWdlLXRpdGxlXCI+0KLQvtCy0LDRgNGLPC9oMT5cclxuICAgICAgICA8YSBocmVmPVwiL3Byb2R1Y3RzL2FkZFwiIGNsYXNzPVwiYnV0dG9uLXByaW1hcnlcIj7QlNC+0LHQsNCy0LjRgtGMINGC0L7QstCw0YA8L2E+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1ib3ggY29udGVudC1ib3hfc21hbGxcIj5cclxuICAgICAgPGZvcm0gY2xhc3M9XCJmb3JtLWlubGluZVwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCh0L7RgNGC0LjRgNC+0LLQsNGC0Ywg0L/Qvjo8L2xhYmVsPlxyXG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBkYXRhLWVsZW1lbnQ9XCJmaWx0ZXJOYW1lXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cItCd0LDQt9Cy0LDQvdC40LUg0YLQvtCy0LDRgNCwXCI+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCIgZGF0YS1lbGVtZW50PVwic2xpZGVyQ29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj7QptC10L3QsDo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgIDwhLS0gLy8hIERvdWJsZVNsaWRlciAtLT5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCh0YLQsNGC0YPRgTo8L2xhYmVsPlxyXG4gICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgZGF0YS1lbGVtZW50PVwiZmlsdGVyU3RhdHVzXCI+XHJcbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlwiIHNlbGVjdGVkPVwiXCI+0JvRjtCx0L7QuTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIxXCI+0JDQutGC0LjQstC90YvQuTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIwXCI+0J3QtdCw0LrRgtC40LLQvdGL0Lk8L29wdGlvbj5cclxuICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Zvcm0+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgICA8ZGl2IGRhdGEtZWxlbWVudD1cInByb2R1Y3RzQ29udGFpbmVyXCIgY2xhc3M9XCJwcm9kdWN0cy1saXN0X19jb250YWluZXJcIj5cclxuICAgICAgICA8IS0tLy8hIFNvcnRhYmxlVGFibGUtLT5cclxuICAgICAgPC9kaXY+XHJcbiAgICA8L2Rpdj5cclxuICAgIGA7XHJcbiAgfVxyXG5cclxuICBpbml0Q29tcG9uZW50cygpIHtcclxuICAgIGNvbnN0IHByb2R1Y3RJZCA9ICcxMDEtcGxhbnNldC1sZW5vdm8teXQzLXg5MGwtNjQtZ2ItM2ctbHRlLWNlcm55aic7XHJcblxyXG4gICAgdGhpcy5jb21wb25lbnRzLnByb2R1Y3RGcm9tID0gbmV3IFByb2R1Y3RGb3JtKHByb2R1Y3RJZCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyByZW5kZXJDb21wb25lbnRzKCkge1xyXG4gICAgY29uc3QgZWxlbWVudCA9IGF3YWl0IHRoaXMuY29tcG9uZW50cy5wcm9kdWN0RnJvbS5yZW5kZXIoKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZ2V0U3ViRWxlbWVudHMoZWxlbWVudCkge1xyXG4gICAgY29uc3QgZWxlbWVudHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWVsZW1lbnRdJyk7XHJcbiAgICByZXR1cm4gWy4uLmVsZW1lbnRzXS5yZWR1Y2UoKGFjYywgbmV4dCkgPT4ge1xyXG4gICAgICBhY2NbbmV4dC5kYXRhc2V0LmVsZW1lbnRdID0gbmV4dDtcclxuICAgICAgcmV0dXJuIGFjYztcclxuICAgIH0sIHt9KTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICBmb3IgKGNvbnN0IGNvbXBvbmVudCBvZiBPYmplY3QudmFsdWVzKHRoaXMuY29tcG9uZW50cykpIHtcclxuICAgICAgY29tcG9uZW50LmRlc3Ryb3koKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUErQkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9FQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/pages/products/list/index.js\n");

/***/ }),

/***/ "./src/utils/escape-html.js":
/*!**********************************!*\
  !*** ./src/utils/escape-html.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (string => string.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;'));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvZXNjYXBlLWh0bWwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvZXNjYXBlLWh0bWwuanM/OGVjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBzdHJpbmcgPT4gc3RyaW5nXHJcbiAgLnJlcGxhY2UoLyYvZywgJyZhbXA7JylcclxuICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXHJcbiAgLnJlcGxhY2UoLycvZywgJyYjMzk7JylcclxuICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXHJcbiAgLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/utils/escape-html.js\n");

/***/ })

})