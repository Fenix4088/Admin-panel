webpackHotUpdate("products-edit-index-js",{

/***/ "./src/components/product-form/index.js":
/*!**********************************************!*\
  !*** ./src/components/product-form/index.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ProductForm; });\n/* harmony import */ var _sortable_list_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sortable-list/index.js */ \"./src/components/sortable-list/index.js\");\n/* harmony import */ var _notification_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../notification/index.js */ \"./src/components/notification/index.js\");\n/* harmony import */ var _utils_escape_html_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/escape-html.js */ \"./src/utils/escape-html.js\");\n/* harmony import */ var _utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/fetch-json.js */ \"./src/utils/fetch-json.js\");\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nclass ProductForm {\n  constructor(productId) {\n    _defineProperty(this, \"element\", void 0);\n\n    _defineProperty(this, \"subElements\", {});\n\n    _defineProperty(this, \"formData\", {});\n\n    _defineProperty(this, \"categories\", []);\n\n    _defineProperty(this, \"defaultFormData\", {\n      title: '',\n      description: '',\n      quantity: 1,\n      subcategory: '',\n      images: [],\n      status: 1,\n      price: 100,\n      discount: 0\n    });\n\n    _defineProperty(this, \"uploadImage\", () => {\n      const fileInput = document.createElement('input');\n      fileInput.type = 'file';\n      fileInput.accept = 'image/*';\n      fileInput.addEventListener('change', async () => {\n        const [file] = fileInput.files;\n\n        if (file) {\n          const formData = new FormData();\n          const {\n            uploadImage,\n            imageListContainer\n          } = this.subElements;\n          formData.append('image', file);\n          uploadImage.classList.add('is-loading');\n          uploadImage.disabled = true;\n          const result = await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])('https://api.imgur.com/3/image', {\n            method: 'POST',\n            headers: {\n              Authorization: \"Client-ID \".concat(\"28aaa2e823b03b1\")\n            },\n            body: formData\n          });\n          imageListContainer.append(this.getImageItem(result.data.link, file.name));\n          uploadImage.classList.remove('is-loading');\n          uploadImage.disabled = false; // Remove input from body\n\n          fileInput.remove();\n        }\n      });\n      fileInput.hidden = true;\n      document.body.appendChild(fileInput);\n      fileInput.click();\n    });\n\n    _defineProperty(this, \"submitForm\", event => {\n      event.preventDefault();\n      this.save();\n    });\n\n    this.productId = productId;\n  }\n\n  initEventListeners() {\n    const {\n      uploadImage,\n      productForm,\n      imageListContainer\n    } = this.subElements;\n    productForm.addEventListener('submit', this.submitForm);\n    uploadImage.addEventListener('pointerdown', this.uploadImage);\n  }\n\n  dispatchEvent(id) {\n    const event = this.productId ? new CustomEvent('product-updated', {\n      detail: id\n    }) : new CustomEvent('product-saved');\n    this.element.dispatchEvent(event);\n  }\n\n  async save() {\n    const product = this.getFormData();\n\n    try {\n      const result = await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(\"\".concat(\"https://course-js.javascript.ru/\", \"api/rest/products\"), {\n        method: this.productId ? 'PATCH' : 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(product)\n      });\n      this.productId ? this.showNotificationMessage('Product Saved', 'success') : this.showNotificationMessage('Product created', 'success');\n      this.dispatchEvent(result.id);\n    } catch (error) {\n      this.showNotificationMessage('OOPS! Something went wrong', 'error');\n      console.error('something went wrong', error);\n    }\n  }\n\n  getFormData() {\n    const {\n      productForm,\n      imageListContainer\n    } = this.subElements;\n    const excludedFields = ['images'];\n    const formatToNumber = ['price', 'quantity', 'discount', 'status'];\n    const fields = Object.keys(this.defaultFormData).filter(item => !excludedFields.includes(item));\n    const values = {};\n\n    for (const field of fields) {\n      values[field] = formatToNumber.includes(field) ? parseInt(productForm.querySelector(\"#\".concat(field)).value) : productForm.querySelector(\"#\".concat(field)).value;\n    }\n\n    const imagesHTMLCollection = imageListContainer.querySelectorAll('.sortable-table__cell-img');\n    values.images = [];\n    values.id = this.productId; // !Case if we create a new product Item and in have no ID yet\n\n    if (!this.productId) {\n      values.id = this.createProductId(values.title);\n      console.log(values.id);\n    }\n\n    for (const image of imagesHTMLCollection) {\n      values.images.push({\n        url: image.src,\n        source: image.alt\n      });\n    }\n\n    return values;\n  }\n\n  showNotificationMessage(messageText, messageType) {\n    const notificationMessage = new _notification_index_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](messageText, {\n      type: messageType\n    });\n    notificationMessage.element.style.position = 'fixed';\n    notificationMessage.element.style.bottom = \"10px\";\n    notificationMessage.element.style.right = '10px';\n    notificationMessage.show();\n  }\n\n  createProductId(productTitle) {\n    const punctuationLess = productTitle.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, \"\");\n    const stringWithoutExcessSpaces = punctuationLess.replace(/\\s{2,}/g, \" \").toLowerCase();\n    const newId = this.toTranslit(stringWithoutExcessSpaces);\n    return newId;\n  }\n\n  toTranslit(text) {\n    return text.replace(/([а-яё])|([\\s_-])|([^a-z\\d])/gi, function (all, ch, space, words, i) {\n      if (space || words) {\n        return space ? '-' : '';\n      }\n\n      var code = ch.charCodeAt(0),\n          index = code == 1025 || code == 1105 ? 0 : code > 1071 ? code - 1071 : code - 1039,\n          t = ['yo', 'a', 'b', 'v', 'g', 'd', 'e', 'zh', 'z', 'i', 'y', 'k', 'l', 'm', 'n', 'o', 'p', 'r', 's', 't', 'u', 'f', 'h', 'c', 'ch', 'sh', 'shch', '', 'y', '', 'e', 'yu', 'ya'];\n      return t[index];\n    });\n  }\n\n  async render() {\n    const categoriesPromise = this.loadCategoriesList();\n    const productPromise = this.productId ? this.loadProductData(this.productId) : [this.defaultFormData];\n    const [categoriesData, productResponse] = await Promise.all([categoriesPromise, productPromise]);\n    const [productData] = productResponse;\n    this.formData = productData;\n    this.categories = categoriesData;\n    this.renderForm();\n    this.setFormData();\n    this.createImagesList();\n    this.initEventListeners();\n    return this.element;\n  }\n\n  renderForm() {\n    const element = document.createElement('div');\n    element.innerHTML = this.formData ? this.template : this.getEmptyTemplate();\n    this.element = element.firstElementChild;\n    this.subElements = this.getSubElements(element);\n  }\n\n  get template() {\n    return \"\\n    <div class=\\\"product-form\\\">\\n      <form data-element=\\\"productForm\\\" class=\\\"form-grid\\\">\\n        <div class=\\\"form-group form-group__half_left\\\">\\n          <fieldset>\\n            <label class=\\\"form-label\\\">\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430</label>\\n            <input required\\n              id=\\\"title\\\"\\n              value=\\\"\\\"\\n              type=\\\"text\\\"\\n              name=\\\"title\\\"\\n              class=\\\"form-control\\\"\\n              placeholder=\\\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\\">\\n          </fieldset>\\n        </div>\\n        <div class=\\\"form-group form-group__wide\\\">\\n          <label class=\\\"form-label\\\">\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435</label>\\n          <textarea required\\n            id=\\\"description\\\"\\n            class=\\\"form-control\\\"\\n            name=\\\"description\\\"\\n            data-element=\\\"productDescription\\\"\\n            placeholder=\\\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\\\"></textarea>\\n        </div>\\n        <div class=\\\"form-group form-group__wide\\\" data-element=\\\"sortable-list-container\\\">\\n          <label class=\\\"form-label\\\">\\u0424\\u043E\\u0442\\u043E</label>\\n          <div class=\\\"sortable-list\\\" data-element=\\\"imageListContainer\\\">\\n          </div>\\n          <button data-element=\\\"uploadImage\\\" type=\\\"button\\\" class=\\\"button-primary-outline\\\">\\n            <span>\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C</span>\\n          </button>\\n        </div>\\n        <div class=\\\"form-group form-group__half_left\\\">\\n          <label class=\\\"form-label\\\">\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F</label>\\n          <select id=\\\"subcategory\\\" class=\\\"form-control\\\" name=\\\"subcategory\\\">\\n            \".concat(this.createCategoriesSelect(), \"\\n          </select>\\n        </div>\\n        <div class=\\\"form-group form-group__half_left form-group__two-col\\\">\\n          <fieldset>\\n            <label class=\\\"form-label\\\">\\u0426\\u0435\\u043D\\u0430 ($)</label>\\n            <input required\\n              id=\\\"price\\\"\\n              value=\\\"\\\"\\n              type=\\\"number\\\"\\n              name=\\\"price\\\"\\n              class=\\\"form-control\\\"\\n              placeholder=\\\"\").concat(this.defaultFormData.price, \"\\\">\\n          </fieldset>\\n          <fieldset>\\n            <label class=\\\"form-label\\\">\\u0421\\u043A\\u0438\\u0434\\u043A\\u0430 ($)</label>\\n            <input required\\n              id=\\\"discount\\\"\\n              value=\\\"\\\"\\n              type=\\\"number\\\"\\n              name=\\\"discount\\\"\\n              class=\\\"form-control\\\"\\n              placeholder=\\\"\").concat(this.defaultFormData.discount, \"\\\">\\n          </fieldset>\\n        </div>\\n        <div class=\\\"form-group form-group__part-half\\\">\\n          <label class=\\\"form-label\\\">\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E</label>\\n          <input required\\n            id=\\\"quantity\\\"\\n            value=\\\"\\\"\\n            type=\\\"number\\\"\\n            class=\\\"form-control\\\"\\n            name=\\\"quantity\\\"\\n            placeholder=\\\"\").concat(this.defaultFormData.quantity, \"\\\">\\n        </div>\\n        <div class=\\\"form-group form-group__part-half\\\">\\n          <label class=\\\"form-label\\\">\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441</label>\\n          <select id=\\\"status\\\" class=\\\"form-control\\\" name=\\\"status\\\">\\n            <option value=\\\"1\\\">\\u0410\\u043A\\u0442\\u0438\\u0432\\u0435\\u043D</option>\\n            <option value=\\\"0\\\">\\u041D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u0435\\u043D</option>\\n          </select>\\n        </div>\\n        <div class=\\\"form-buttons\\\">\\n          <button type=\\\"submit\\\" name=\\\"save\\\" class=\\\"button-primary-outline\\\">\\n            \").concat(this.productId ? 'Сохранить' : 'Добавить', \" \\u0442\\u043E\\u0432\\u0430\\u0440\\n          </button>\\n        </div>\\n      </form>\\n    </div>\\n    \");\n  }\n\n  getEmptyTemplate() {\n    return \"\\n    <div>\\n      <h1 class=\\\"page-title\\\">\\u0421\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430 \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u0430</h1>\\n      <p>\\u0418\\u0437\\u0432\\u0438\\u043D\\u0438\\u0442\\u0435, \\u0434\\u0430\\u043D\\u043D\\u044B\\u0439 \\u0442\\u043E\\u0432\\u0430\\u0440 \\u043D\\u0435 \\u0441\\u0443\\u0449\\u0435\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442</p>\\n    </div>\";\n  }\n\n  createCategoriesSelect() {\n    return this.categories.map(category => {\n      return category.subcategories.map(subcategory => {\n        return \"<option value=\\\"\".concat(subcategory.id, \"\\\">\").concat(category.title, \" &gt; \").concat(subcategory.title, \"</option>\");\n      }).join('');\n    });\n  }\n\n  createImagesList() {\n    const {\n      imageListContainer\n    } = this.subElements;\n    const {\n      images\n    } = this.formData;\n    const items = images.map(image => this.getImageItem(image.url, image.source));\n    const sortableList = new _sortable_list_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\n      items\n    });\n    imageListContainer.append(sortableList.element);\n  }\n\n  getImageItem(url, name) {\n    const wrapper = document.createElement('div');\n    wrapper.innerHTML = \"          \\n        <li class=\\\"products-edit__imagelist-item sortable-list__item\\\" style=\\\"\\\">\\n          <span>\\n            <img src=\\\"../icons/icon-grab.svg\\\" data-grab-handle=\\\"\\\" alt=\\\"grab\\\">\\n            <img class=\\\"sortable-table__cell-img\\\" alt=\\\"\".concat(Object(_utils_escape_html_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(name), \"\\\" src=\\\"\").concat(Object(_utils_escape_html_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(url), \"\\\">\\n            <span>\").concat(Object(_utils_escape_html_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(name), \"</span>\\n          </span>\\n          <button type=\\\"button\\\">\\n            <img src=\\\"../icons/icon-trash.svg\\\" data-delete-handle=\\\"\\\" alt=\\\"delete\\\">\\n          </button>\\n        </li>\");\n    return wrapper.firstElementChild;\n  }\n\n  getSubElements(element) {\n    const elements = element.querySelectorAll('[data-element]');\n    return [...elements].reduce((acc, item) => {\n      acc[item.dataset.element] = item;\n      return acc;\n    }, {});\n  }\n\n  async loadCategoriesList() {\n    return await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(\"\".concat(\"https://course-js.javascript.ru/\", \"api/rest/categories?_sort=weight&_refs=subcategory\"));\n  }\n\n  async loadProductData(id) {\n    return await Object(_utils_fetch_json_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(\"\".concat(\"https://course-js.javascript.ru/\", \"api/rest/products?id=\").concat(id));\n  }\n\n  setFormData() {\n    const {\n      productForm\n    } = this.subElements;\n    const excludedData = ['images'];\n    const fields = Object.keys(this.defaultFormData).filter(item => !excludedData.includes(item));\n    fields.forEach(field => {\n      productForm.querySelector(\"#\".concat(field)).value = this.formData[field] || this.defaultFormData[field];\n    });\n  }\n\n  destroy() {\n    this.remove();\n    this.element = null;\n    this.subElements = null;\n  }\n\n  remove() {\n    this.element.remove();\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50cy9wcm9kdWN0LWZvcm0vaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9wcm9kdWN0LWZvcm0vaW5kZXguanM/NWJkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU29ydGFibGVMaXN0IGZyb20gJy4uL3NvcnRhYmxlLWxpc3QvaW5kZXguanMnO1xyXG5pbXBvcnQgTm90aWZpY2F0aW9uTWVzc2FnZSBmcm9tICcuLi9ub3RpZmljYXRpb24vaW5kZXguanMnO1xyXG5pbXBvcnQgZXNjYXBlSHRtbCBmcm9tICcuLi8uLi91dGlscy9lc2NhcGUtaHRtbC5qcyc7XHJcbmltcG9ydCBmZXRjaEpzb24gZnJvbSAnLi4vLi4vdXRpbHMvZmV0Y2gtanNvbi5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9kdWN0Rm9ybSB7XHJcbiAgZWxlbWVudDtcclxuICBzdWJFbGVtZW50cyA9IHt9O1xyXG4gIGZvcm1EYXRhID0ge307XHJcbiAgY2F0ZWdvcmllcyA9IFtdO1xyXG4gIGRlZmF1bHRGb3JtRGF0YSA9IHtcclxuICAgIHRpdGxlOiAnJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnJyxcclxuICAgIHF1YW50aXR5OiAxLFxyXG4gICAgc3ViY2F0ZWdvcnk6ICcnLFxyXG4gICAgaW1hZ2VzOiBbXSxcclxuICAgIHN0YXR1czogMSxcclxuICAgIHByaWNlOiAxMDAsXHJcbiAgICBkaXNjb3VudDogMFxyXG4gIH07XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb2R1Y3RJZCkge1xyXG4gICAgdGhpcy5wcm9kdWN0SWQgPSBwcm9kdWN0SWQ7XHJcbiAgfVxyXG5cclxuICBpbml0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCB7IHVwbG9hZEltYWdlLCBwcm9kdWN0Rm9ybSwgaW1hZ2VMaXN0Q29udGFpbmVyIH0gPSB0aGlzLnN1YkVsZW1lbnRzO1xyXG5cclxuICAgIHByb2R1Y3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc3VibWl0Rm9ybSk7XHJcbiAgICB1cGxvYWRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIHRoaXMudXBsb2FkSW1hZ2UpO1xyXG4gIH1cclxuXHJcbiAgZGlzcGF0Y2hFdmVudChpZCkge1xyXG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLnByb2R1Y3RJZFxyXG4gICAgICA/IG5ldyBDdXN0b21FdmVudCgncHJvZHVjdC11cGRhdGVkJywgeyBkZXRhaWw6IGlkIH0pXHJcbiAgICAgIDogbmV3IEN1c3RvbUV2ZW50KCdwcm9kdWN0LXNhdmVkJyk7XHJcbiAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgfVxyXG5cclxuICB1cGxvYWRJbWFnZSA9ICgpID0+IHtcclxuICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcbiAgICBmaWxlSW5wdXQudHlwZSA9ICdmaWxlJztcclxuICAgIGZpbGVJbnB1dC5hY2NlcHQgPSAnaW1hZ2UvKic7XHJcblxyXG4gICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgW2ZpbGVdID0gZmlsZUlucHV0LmZpbGVzO1xyXG5cclxuICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xyXG4gICAgICAgIGNvbnN0IHsgdXBsb2FkSW1hZ2UsIGltYWdlTGlzdENvbnRhaW5lciB9ID0gdGhpcy5zdWJFbGVtZW50cztcclxuXHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdpbWFnZScsIGZpbGUpO1xyXG4gICAgICAgIHVwbG9hZEltYWdlLmNsYXNzTGlzdC5hZGQoJ2lzLWxvYWRpbmcnKTtcclxuICAgICAgICB1cGxvYWRJbWFnZS5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoSnNvbignaHR0cHM6Ly9hcGkuaW1ndXIuY29tLzMvaW1hZ2UnLCB7XHJcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYENsaWVudC1JRCAke3Byb2Nlc3MuZW52LklNR1VSX0NMSUVOVF9JRH1gXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgYm9keTogZm9ybURhdGFcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW1hZ2VMaXN0Q29udGFpbmVyLmFwcGVuZCh0aGlzLmdldEltYWdlSXRlbShyZXN1bHQuZGF0YS5saW5rLCBmaWxlLm5hbWUpKTtcclxuICAgICAgICB1cGxvYWRJbWFnZS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1sb2FkaW5nJyk7XHJcbiAgICAgICAgdXBsb2FkSW1hZ2UuZGlzYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlIGlucHV0IGZyb20gYm9keVxyXG4gICAgICAgIGZpbGVJbnB1dC5yZW1vdmUoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZmlsZUlucHV0LmhpZGRlbiA9IHRydWU7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZpbGVJbnB1dCk7XHJcbiAgICBmaWxlSW5wdXQuY2xpY2soKTtcclxuICB9O1xyXG5cclxuICBzdWJtaXRGb3JtID0gZXZlbnQgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuc2F2ZSgpO1xyXG4gIH07XHJcblxyXG4gIGFzeW5jIHNhdmUoKSB7XHJcbiAgICBjb25zdCBwcm9kdWN0ID0gdGhpcy5nZXRGb3JtRGF0YSgpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoSnNvbihgJHtwcm9jZXNzLmVudi5CQUNLRU5EX1VSTH1hcGkvcmVzdC9wcm9kdWN0c2AsIHtcclxuICAgICAgICBtZXRob2Q6IHRoaXMucHJvZHVjdElkID8gJ1BBVENIJyA6ICdQVVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHByb2R1Y3QpXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnByb2R1Y3RJZFxyXG4gICAgICAgID8gdGhpcy5zaG93Tm90aWZpY2F0aW9uTWVzc2FnZSgnUHJvZHVjdCBTYXZlZCcsICdzdWNjZXNzJylcclxuICAgICAgICA6IHRoaXMuc2hvd05vdGlmaWNhdGlvbk1lc3NhZ2UoJ1Byb2R1Y3QgY3JlYXRlZCcsICdzdWNjZXNzJyk7XHJcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChyZXN1bHQuaWQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5zaG93Tm90aWZpY2F0aW9uTWVzc2FnZSgnT09QUyEgU29tZXRoaW5nIHdlbnQgd3JvbmcnLCAnZXJyb3InKTtcclxuICAgICAgY29uc29sZS5lcnJvcignc29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtRGF0YSgpIHtcclxuICAgIGNvbnN0IHsgcHJvZHVjdEZvcm0sIGltYWdlTGlzdENvbnRhaW5lciB9ID0gdGhpcy5zdWJFbGVtZW50cztcclxuICAgIGNvbnN0IGV4Y2x1ZGVkRmllbGRzID0gWydpbWFnZXMnXTtcclxuICAgIGNvbnN0IGZvcm1hdFRvTnVtYmVyID0gWydwcmljZScsICdxdWFudGl0eScsICdkaXNjb3VudCcsICdzdGF0dXMnXTtcclxuICAgIGNvbnN0IGZpZWxkcyA9IE9iamVjdC5rZXlzKHRoaXMuZGVmYXVsdEZvcm1EYXRhKS5maWx0ZXIoaXRlbSA9PiAhZXhjbHVkZWRGaWVsZHMuaW5jbHVkZXMoaXRlbSkpO1xyXG4gICAgY29uc3QgdmFsdWVzID0ge307XHJcblxyXG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiBmaWVsZHMpIHtcclxuICAgICAgdmFsdWVzW2ZpZWxkXSA9IGZvcm1hdFRvTnVtYmVyLmluY2x1ZGVzKGZpZWxkKVxyXG4gICAgICAgID8gcGFyc2VJbnQocHJvZHVjdEZvcm0ucXVlcnlTZWxlY3RvcihgIyR7ZmllbGR9YCkudmFsdWUpXHJcbiAgICAgICAgOiBwcm9kdWN0Rm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtmaWVsZH1gKS52YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBpbWFnZXNIVE1MQ29sbGVjdGlvbiA9IGltYWdlTGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc29ydGFibGUtdGFibGVfX2NlbGwtaW1nJyk7XHJcblxyXG4gICAgdmFsdWVzLmltYWdlcyA9IFtdO1xyXG4gICAgdmFsdWVzLmlkID0gdGhpcy5wcm9kdWN0SWQ7XHJcbiAgICAvLyAhQ2FzZSBpZiB3ZSBjcmVhdGUgYSBuZXcgcHJvZHVjdCBJdGVtIGFuZCBpbiBoYXZlIG5vIElEIHlldFxyXG4gICAgaWYoIXRoaXMucHJvZHVjdElkKSB7XHJcbiAgICAgIHZhbHVlcy5pZCA9IHRoaXMuY3JlYXRlUHJvZHVjdElkKHZhbHVlcy50aXRsZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHZhbHVlcy5pZCk7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChjb25zdCBpbWFnZSBvZiBpbWFnZXNIVE1MQ29sbGVjdGlvbikge1xyXG4gICAgICB2YWx1ZXMuaW1hZ2VzLnB1c2goe1xyXG4gICAgICAgIHVybDogaW1hZ2Uuc3JjLFxyXG4gICAgICAgIHNvdXJjZTogaW1hZ2UuYWx0XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbHVlcztcclxuICB9XHJcblxyXG4gIHNob3dOb3RpZmljYXRpb25NZXNzYWdlKG1lc3NhZ2VUZXh0LCBtZXNzYWdlVHlwZSkge1xyXG4gICAgY29uc3Qgbm90aWZpY2F0aW9uTWVzc2FnZSA9IG5ldyBOb3RpZmljYXRpb25NZXNzYWdlKG1lc3NhZ2VUZXh0LCB7IHR5cGU6IG1lc3NhZ2VUeXBlIH0pO1xyXG4gICAgbm90aWZpY2F0aW9uTWVzc2FnZS5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgIG5vdGlmaWNhdGlvbk1lc3NhZ2UuZWxlbWVudC5zdHlsZS5ib3R0b20gPSBgMTBweGA7XHJcbiAgICBub3RpZmljYXRpb25NZXNzYWdlLmVsZW1lbnQuc3R5bGUucmlnaHQgPSAnMTBweCc7XHJcblxyXG4gICAgbm90aWZpY2F0aW9uTWVzc2FnZS5zaG93KCk7XHJcbiAgfVxyXG5cclxuICBjcmVhdGVQcm9kdWN0SWQocHJvZHVjdFRpdGxlKSB7XHJcbiAgICBjb25zdCBwdW5jdHVhdGlvbkxlc3MgPSBwcm9kdWN0VGl0bGUucmVwbGFjZSgvWy4sXFwvIyEkJVxcXiZcXCo7Ont9PVxcLV9gfigpXS9nLFwiXCIpO1xyXG4gICAgY29uc3Qgc3RyaW5nV2l0aG91dEV4Y2Vzc1NwYWNlcyA9IHB1bmN0dWF0aW9uTGVzcy5yZXBsYWNlKC9cXHN7Mix9L2csXCIgXCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCBuZXdJZCA9IHRoaXMudG9UcmFuc2xpdChzdHJpbmdXaXRob3V0RXhjZXNzU3BhY2VzKTtcclxuICAgIHJldHVybiBuZXdJZDtcclxuICB9XHJcblxyXG4gICB0b1RyYW5zbGl0KHRleHQpIHtcclxuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoLyhb0LAt0Y/RkV0pfChbXFxzXy1dKXwoW15hLXpcXGRdKS9naSxcclxuICAgIGZ1bmN0aW9uIChhbGwsIGNoLCBzcGFjZSwgd29yZHMsIGkpIHtcclxuICAgICAgICBpZiAoc3BhY2UgfHwgd29yZHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNwYWNlID8gJy0nIDogJyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKSxcclxuICAgICAgICAgICAgaW5kZXggPSBjb2RlID09IDEwMjUgfHwgY29kZSA9PSAxMTA1ID8gMCA6XHJcbiAgICAgICAgICAgICAgICBjb2RlID4gMTA3MSA/IGNvZGUgLSAxMDcxIDogY29kZSAtIDEwMzksXHJcbiAgICAgICAgICAgIHQgPSBbJ3lvJywgJ2EnLCAnYicsICd2JywgJ2cnLCAnZCcsICdlJywgJ3poJyxcclxuICAgICAgICAgICAgICAgICd6JywgJ2knLCAneScsICdrJywgJ2wnLCAnbScsICduJywgJ28nLCAncCcsXHJcbiAgICAgICAgICAgICAgICAncicsICdzJywgJ3QnLCAndScsICdmJywgJ2gnLCAnYycsICdjaCcsICdzaCcsXHJcbiAgICAgICAgICAgICAgICAnc2hjaCcsICcnLCAneScsICcnLCAnZScsICd5dScsICd5YSdcclxuICAgICAgICAgICAgXTsgXHJcbiAgICAgICAgcmV0dXJuIHRbaW5kZXhdO1xyXG4gICAgfSk7XHJcbiAgICBcclxufVxyXG5cclxuICBhc3luYyByZW5kZXIoKSB7XHJcbiAgICBjb25zdCBjYXRlZ29yaWVzUHJvbWlzZSA9IHRoaXMubG9hZENhdGVnb3JpZXNMaXN0KCk7XHJcbiAgICBjb25zdCBwcm9kdWN0UHJvbWlzZSA9IHRoaXMucHJvZHVjdElkXHJcbiAgICAgID8gdGhpcy5sb2FkUHJvZHVjdERhdGEodGhpcy5wcm9kdWN0SWQpXHJcbiAgICAgIDogW3RoaXMuZGVmYXVsdEZvcm1EYXRhXTtcclxuICAgIGNvbnN0IFtjYXRlZ29yaWVzRGF0YSwgcHJvZHVjdFJlc3BvbnNlXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgY2F0ZWdvcmllc1Byb21pc2UsXHJcbiAgICAgIHByb2R1Y3RQcm9taXNlXHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zdCBbcHJvZHVjdERhdGFdID0gcHJvZHVjdFJlc3BvbnNlO1xyXG5cclxuICAgIHRoaXMuZm9ybURhdGEgPSBwcm9kdWN0RGF0YTtcclxuICAgIHRoaXMuY2F0ZWdvcmllcyA9IGNhdGVnb3JpZXNEYXRhO1xyXG5cclxuICAgIHRoaXMucmVuZGVyRm9ybSgpO1xyXG4gICAgdGhpcy5zZXRGb3JtRGF0YSgpO1xyXG4gICAgdGhpcy5jcmVhdGVJbWFnZXNMaXN0KCk7XHJcbiAgICB0aGlzLmluaXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICByZW5kZXJGb3JtKCkge1xyXG4gICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLmZvcm1EYXRhID8gdGhpcy50ZW1wbGF0ZSA6IHRoaXMuZ2V0RW1wdHlUZW1wbGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICB0aGlzLnN1YkVsZW1lbnRzID0gdGhpcy5nZXRTdWJFbGVtZW50cyhlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGdldCB0ZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBgXHJcbiAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdC1mb3JtXCI+XHJcbiAgICAgIDxmb3JtIGRhdGEtZWxlbWVudD1cInByb2R1Y3RGb3JtXCIgY2xhc3M9XCJmb3JtLWdyaWRcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBmb3JtLWdyb3VwX19oYWxmX2xlZnRcIj5cclxuICAgICAgICAgIDxmaWVsZHNldD5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCd0LDQt9Cy0LDQvdC40LUg0YLQvtCy0LDRgNCwPC9sYWJlbD5cclxuICAgICAgICAgICAgPGlucHV0IHJlcXVpcmVkXHJcbiAgICAgICAgICAgICAgaWQ9XCJ0aXRsZVwiXHJcbiAgICAgICAgICAgICAgdmFsdWU9XCJcIlxyXG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcclxuICAgICAgICAgICAgICBuYW1lPVwidGl0bGVcIlxyXG4gICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cItCd0LDQt9Cy0LDQvdC40LUg0YLQvtCy0LDRgNCwXCI+XHJcbiAgICAgICAgICA8L2ZpZWxkc2V0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGZvcm0tZ3JvdXBfX3dpZGVcIj5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj7QntC/0LjRgdCw0L3QuNC1PC9sYWJlbD5cclxuICAgICAgICAgIDx0ZXh0YXJlYSByZXF1aXJlZFxyXG4gICAgICAgICAgICBpZD1cImRlc2NyaXB0aW9uXCJcclxuICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxyXG4gICAgICAgICAgICBuYW1lPVwiZGVzY3JpcHRpb25cIlxyXG4gICAgICAgICAgICBkYXRhLWVsZW1lbnQ9XCJwcm9kdWN0RGVzY3JpcHRpb25cIlxyXG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cItCe0L/QuNGB0LDQvdC40LUg0YLQvtCy0LDRgNCwXCI+PC90ZXh0YXJlYT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBmb3JtLWdyb3VwX193aWRlXCIgZGF0YS1lbGVtZW50PVwic29ydGFibGUtbGlzdC1jb250YWluZXJcIj5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj7QpNC+0YLQvjwvbGFiZWw+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic29ydGFibGUtbGlzdFwiIGRhdGEtZWxlbWVudD1cImltYWdlTGlzdENvbnRhaW5lclwiPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8YnV0dG9uIGRhdGEtZWxlbWVudD1cInVwbG9hZEltYWdlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnV0dG9uLXByaW1hcnktb3V0bGluZVwiPlxyXG4gICAgICAgICAgICA8c3Bhbj7Ql9Cw0LPRgNGD0LfQuNGC0Yw8L3NwYW4+XHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBmb3JtLWdyb3VwX19oYWxmX2xlZnRcIj5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj7QmtCw0YLQtdCz0L7RgNC40Y88L2xhYmVsPlxyXG4gICAgICAgICAgPHNlbGVjdCBpZD1cInN1YmNhdGVnb3J5XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwic3ViY2F0ZWdvcnlcIj5cclxuICAgICAgICAgICAgJHt0aGlzLmNyZWF0ZUNhdGVnb3JpZXNTZWxlY3QoKX1cclxuICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGZvcm0tZ3JvdXBfX2hhbGZfbGVmdCBmb3JtLWdyb3VwX190d28tY29sXCI+XHJcbiAgICAgICAgICA8ZmllbGRzZXQ+XHJcbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj7QptC10L3QsCAoJCk8L2xhYmVsPlxyXG4gICAgICAgICAgICA8aW5wdXQgcmVxdWlyZWRcclxuICAgICAgICAgICAgICBpZD1cInByaWNlXCJcclxuICAgICAgICAgICAgICB2YWx1ZT1cIlwiXHJcbiAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgbmFtZT1cInByaWNlXCJcclxuICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIke3RoaXMuZGVmYXVsdEZvcm1EYXRhLnByaWNlfVwiPlxyXG4gICAgICAgICAgPC9maWVsZHNldD5cclxuICAgICAgICAgIDxmaWVsZHNldD5cclxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCh0LrQuNC00LrQsCAoJCk8L2xhYmVsPlxyXG4gICAgICAgICAgICA8aW5wdXQgcmVxdWlyZWRcclxuICAgICAgICAgICAgICBpZD1cImRpc2NvdW50XCJcclxuICAgICAgICAgICAgICB2YWx1ZT1cIlwiXHJcbiAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgbmFtZT1cImRpc2NvdW50XCJcclxuICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXHJcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIke3RoaXMuZGVmYXVsdEZvcm1EYXRhLmRpc2NvdW50fVwiPlxyXG4gICAgICAgICAgPC9maWVsZHNldD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBmb3JtLWdyb3VwX19wYXJ0LWhhbGZcIj5cclxuICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImZvcm0tbGFiZWxcIj7QmtC+0LvQuNGH0LXRgdGC0LLQvjwvbGFiZWw+XHJcbiAgICAgICAgICA8aW5wdXQgcmVxdWlyZWRcclxuICAgICAgICAgICAgaWQ9XCJxdWFudGl0eVwiXHJcbiAgICAgICAgICAgIHZhbHVlPVwiXCJcclxuICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcclxuICAgICAgICAgICAgbmFtZT1cInF1YW50aXR5XCJcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCIke3RoaXMuZGVmYXVsdEZvcm1EYXRhLnF1YW50aXR5fVwiPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGZvcm0tZ3JvdXBfX3BhcnQtaGFsZlwiPlxyXG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwiZm9ybS1sYWJlbFwiPtCh0YLQsNGC0YPRgTwvbGFiZWw+XHJcbiAgICAgICAgICA8c2VsZWN0IGlkPVwic3RhdHVzXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBuYW1lPVwic3RhdHVzXCI+XHJcbiAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIxXCI+0JDQutGC0LjQstC10L08L29wdGlvbj5cclxuICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjBcIj7QndC10LDQutGC0LjQstC10L08L29wdGlvbj5cclxuICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWJ1dHRvbnNcIj5cclxuICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIG5hbWU9XCJzYXZlXCIgY2xhc3M9XCJidXR0b24tcHJpbWFyeS1vdXRsaW5lXCI+XHJcbiAgICAgICAgICAgICR7dGhpcy5wcm9kdWN0SWQgPyAn0KHQvtGF0YDQsNC90LjRgtGMJyA6ICfQlNC+0LHQsNCy0LjRgtGMJ30g0YLQvtCy0LDRgFxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZm9ybT5cclxuICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICB9XHJcblxyXG4gIGdldEVtcHR5VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gYFxyXG4gICAgPGRpdj5cclxuICAgICAgPGgxIGNsYXNzPVwicGFnZS10aXRsZVwiPtCh0YLRgNCw0L3QuNGG0LAg0L3QtSDQvdCw0LnQtNC10L3QsDwvaDE+XHJcbiAgICAgIDxwPtCY0LfQstC40L3QuNGC0LUsINC00LDQvdC90YvQuSDRgtC+0LLQsNGAINC90LUg0YHRg9GJ0LXRgdGC0LLRg9C10YI8L3A+XHJcbiAgICA8L2Rpdj5gO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ2F0ZWdvcmllc1NlbGVjdCgpIHtcclxuICAgIHJldHVybiB0aGlzLmNhdGVnb3JpZXMubWFwKGNhdGVnb3J5ID0+IHtcclxuICAgICAgcmV0dXJuIGNhdGVnb3J5LnN1YmNhdGVnb3JpZXNcclxuICAgICAgICAubWFwKHN1YmNhdGVnb3J5ID0+IHtcclxuICAgICAgICAgIHJldHVybiBgPG9wdGlvbiB2YWx1ZT1cIiR7c3ViY2F0ZWdvcnkuaWR9XCI+JHtjYXRlZ29yeS50aXRsZX0gJmd0OyAke3N1YmNhdGVnb3J5LnRpdGxlfTwvb3B0aW9uPmA7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuam9pbignJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZUltYWdlc0xpc3QoKSB7XHJcbiAgICBjb25zdCB7IGltYWdlTGlzdENvbnRhaW5lciB9ID0gdGhpcy5zdWJFbGVtZW50cztcclxuICAgIGNvbnN0IHsgaW1hZ2VzIH0gPSB0aGlzLmZvcm1EYXRhO1xyXG4gICAgY29uc3QgaXRlbXMgPSBpbWFnZXMubWFwKGltYWdlID0+IHRoaXMuZ2V0SW1hZ2VJdGVtKGltYWdlLnVybCwgaW1hZ2Uuc291cmNlKSk7XHJcbiAgICBjb25zdCBzb3J0YWJsZUxpc3QgPSBuZXcgU29ydGFibGVMaXN0KHsgaXRlbXMgfSk7XHJcbiAgICBpbWFnZUxpc3RDb250YWluZXIuYXBwZW5kKHNvcnRhYmxlTGlzdC5lbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGdldEltYWdlSXRlbSh1cmwsIG5hbWUpIHtcclxuICAgIGNvbnN0IHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHdyYXBwZXIuaW5uZXJIVE1MID0gYCAgICAgICAgICBcclxuICAgICAgICA8bGkgY2xhc3M9XCJwcm9kdWN0cy1lZGl0X19pbWFnZWxpc3QtaXRlbSBzb3J0YWJsZS1saXN0X19pdGVtXCIgc3R5bGU9XCJcIj5cclxuICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICA8aW1nIHNyYz1cIi4uL2ljb25zL2ljb24tZ3JhYi5zdmdcIiBkYXRhLWdyYWItaGFuZGxlPVwiXCIgYWx0PVwiZ3JhYlwiPlxyXG4gICAgICAgICAgICA8aW1nIGNsYXNzPVwic29ydGFibGUtdGFibGVfX2NlbGwtaW1nXCIgYWx0PVwiJHtlc2NhcGVIdG1sKG5hbWUpfVwiIHNyYz1cIiR7ZXNjYXBlSHRtbChcclxuICAgICAgdXJsXHJcbiAgICApfVwiPlxyXG4gICAgICAgICAgICA8c3Bhbj4ke2VzY2FwZUh0bWwobmFtZSl9PC9zcGFuPlxyXG4gICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCI+XHJcbiAgICAgICAgICAgIDxpbWcgc3JjPVwiLi4vaWNvbnMvaWNvbi10cmFzaC5zdmdcIiBkYXRhLWRlbGV0ZS1oYW5kbGU9XCJcIiBhbHQ9XCJkZWxldGVcIj5cclxuICAgICAgICAgIDwvYnV0dG9uPlxyXG4gICAgICAgIDwvbGk+YDtcclxuXHJcbiAgICByZXR1cm4gd3JhcHBlci5maXJzdEVsZW1lbnRDaGlsZDtcclxuICB9XHJcblxyXG4gIGdldFN1YkVsZW1lbnRzKGVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVsZW1lbnRzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1lbGVtZW50XScpO1xyXG4gICAgcmV0dXJuIFsuLi5lbGVtZW50c10ucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcclxuICAgICAgYWNjW2l0ZW0uZGF0YXNldC5lbGVtZW50XSA9IGl0ZW07XHJcbiAgICAgIHJldHVybiBhY2M7XHJcbiAgICB9LCB7fSk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkQ2F0ZWdvcmllc0xpc3QoKSB7XHJcbiAgICByZXR1cm4gYXdhaXQgZmV0Y2hKc29uKFxyXG4gICAgICBgJHtwcm9jZXNzLmVudi5CQUNLRU5EX1VSTH1hcGkvcmVzdC9jYXRlZ29yaWVzP19zb3J0PXdlaWdodCZfcmVmcz1zdWJjYXRlZ29yeWBcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBsb2FkUHJvZHVjdERhdGEoaWQpIHtcclxuICAgIHJldHVybiBhd2FpdCBmZXRjaEpzb24oYCR7cHJvY2Vzcy5lbnYuQkFDS0VORF9VUkx9YXBpL3Jlc3QvcHJvZHVjdHM/aWQ9JHtpZH1gKTtcclxuICB9XHJcblxyXG4gIHNldEZvcm1EYXRhKCkge1xyXG4gICAgY29uc3QgeyBwcm9kdWN0Rm9ybSB9ID0gdGhpcy5zdWJFbGVtZW50cztcclxuICAgIGNvbnN0IGV4Y2x1ZGVkRGF0YSA9IFsnaW1hZ2VzJ107XHJcbiAgICBjb25zdCBmaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLmRlZmF1bHRGb3JtRGF0YSkuZmlsdGVyKGl0ZW0gPT4gIWV4Y2x1ZGVkRGF0YS5pbmNsdWRlcyhpdGVtKSk7XHJcbiAgICBmaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XHJcbiAgICAgIHByb2R1Y3RGb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2ZpZWxkfWApLnZhbHVlID1cclxuICAgICAgICB0aGlzLmZvcm1EYXRhW2ZpZWxkXSB8fCB0aGlzLmRlZmF1bHRGb3JtRGF0YVtmaWVsZF07XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLnJlbW92ZSgpO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gbnVsbDtcclxuICAgIHRoaXMuc3ViRWxlbWVudHMgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlKCkge1xyXG4gICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQWdCQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQVZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBVUE7QUFtQkE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2REE7QUF5REE7QUFDQTtBQUNBO0FBQ0E7QUEzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQTRDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUxBO0FBT0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFRQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBS0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFxRkE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlXQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/components/product-form/index.js\n");

/***/ })

})