{"version":3,"sources":["webpack:///./src/components/sortable-table/index.js","webpack:///./src/pages/products/list/products-headers.js","webpack:///./src/components/double-slider/index.js","webpack:///./src/pages/products/list/index.js","webpack:///./src/utils/fetch-json.js"],"names":["SortableTable","constructor","headersConfig","url","sorted","id","find","item","sortable","order","isSortLocally","step","start","end","clickableRow","this","async","bottom","element","getBoundingClientRect","document","documentElement","clientHeight","loading","sortLocally","data","loadData","update","event","column","target","closest","dataset","newOrder","asc","desc","toggleOrder","append","subElements","arrow","sortOnServer","URL","render","wrapper","createElement","innerHTML","getTable","firstElementChild","getSubElements","renderRows","initEventListeners","classList","remove","searchParams","set","add","fetchJson","addRows","body","getTableRows","rows","childNodes","getTableHeader","map","getHeaderRow","join","title","getHeaderSortingArrow","getTableBody","getTableRow","template","header","addEventListener","onSortClick","onWindowScroll","sortedData","sortData","length","arr","sortType","customSorting","direction","sort","a","b","localeCompare","querySelectorAll","reduce","accum","subElement","removeEventListener","destroy","category","DoubleSlider","min","max","formatValue","value","selected","from","to","e","preventDefault","thumbElement","left","right","thumbLeft","shiftX","clientX","dragging","pointerMove","clickUp","innerLeft","innerRight","width","inner","newLeft","parseFloat","thumbRight","style","progress","getValue","newRight","dispatchEvent","CustomEvent","detail","bubbles","markup","acc","nextValue","clickDown","rangeTotal","Math","round","onThumbPointerMove","onThumbPointerUp","floor","Page","filterName","filterStatus","doubleSliderData","filterData","trim","updateTable","components","doubleSlider","filter","clearFilterBtn","sortableTable","onFilterInput","onRangeSelect","clearFilters","updatedUrl","createURL","href","minValue","maxValue","process","initComponents","renderComponents","sliderContainer","productsContainer","next","component","Object","values","params","response","fetch","toString","err","FetchError","ok","errorText","statusText","json","error","message","status","Error","super","window","reason","alert"],"mappings":"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","file":"products-list-index-js-5.js","sourcesContent":["import fetchJson from \"../../utils/fetch-json.js\";\r\n\r\nconst BACKEND_URL = 'https://course-js.javascript.ru';\r\n\r\nexport default class SortableTable {\r\n  element;\r\n  subElements = {};\r\n  data = [];\r\n  loading = false;\r\n  step = 20;\r\n  start = 0;\r\n  end = this.start + this.step;\r\n\r\n  onWindowScroll = async () => {\r\n    const { bottom } = this.element.getBoundingClientRect();\r\n    const { id, order } = this.sorted;\r\n    if (bottom < document.documentElement.clientHeight && !this.loading && this.sortLocally) {\r\n      this.start = this.end;\r\n      this.end = this.start + this.step;\r\n      this.loading = true;\r\n\r\n      const data = await this.loadData(id, order, this.start, this.end);\r\n      this.update(data);\r\n\r\n      this.loading = false;\r\n    }\r\n  };\r\n\r\n  onSortClick = event => {\r\n    const column = event.target.closest('[data-sortable=\"true\"]');\r\n    const toggleOrder = order => {\r\n      const orders = {\r\n        asc: 'desc',\r\n        desc: 'asc'\r\n      };\r\n\r\n      return orders[order];\r\n    };\r\n\r\n    if (column) {\r\n      const { id, order } = column.dataset;\r\n      const newOrder = toggleOrder(order);\r\n\r\n      this.sorted = {\r\n        id,\r\n        order: newOrder\r\n      };\r\n\r\n      column.dataset.order = newOrder;\r\n      column.append(this.subElements.arrow);\r\n\r\n      if (this.isSortLocally) {\r\n        this.sortLocally(id, newOrder);\r\n      } else {\r\n        this.sortOnServer(id, newOrder, 1, 1 + this.step);\r\n      }\r\n    }\r\n  };\r\n\r\n  constructor(headersConfig = [], {\r\n    url = '',\r\n    sorted = {\r\n      id: headersConfig.find(item => item.sortable).id,\r\n      order: 'asc'\r\n    },\r\n    isSortLocally = false,\r\n    step = 20,\r\n    start = 0,\r\n    end = start + step,\r\n    clickableRow = true,\r\n  } = {}) {\r\n    this.headersConfig = headersConfig;\r\n    this.url = new URL(url, BACKEND_URL);\r\n    this.sorted = sorted;\r\n    this.isSortLocally = isSortLocally;\r\n    this.clickableRow = clickableRow;\r\n    this.step = step;\r\n    this.start = start;\r\n    this.end = end;\r\n    this.render();\r\n  }\r\n\r\n  async render() {\r\n    const {id, order} = this.sorted;\r\n    const wrapper = document.createElement('div');\r\n\r\n    wrapper.innerHTML = this.getTable();\r\n\r\n    const element = wrapper.firstElementChild;\r\n\r\n    this.element = element;\r\n    this.subElements = this.getSubElements(element);\r\n\r\n    const data = await this.loadData(id, order, this.start, this.end);\r\n\r\n    this.renderRows(data);\r\n    this.initEventListeners();\r\n    return this.element;\r\n  }\r\n\r\n  async loadData (id, order, start = this.start, end = this.end) {\r\n    const {loading} = this.subElements;\r\n\r\n    loading.classList.remove(\"hide\");\r\n\r\n    this.url.searchParams.set('_sort', id);\r\n    this.url.searchParams.set('_order', order);\r\n    this.url.searchParams.set('_start', start);\r\n    this.url.searchParams.set('_end', end);\r\n    \r\n    this.element.classList.add('sortable-table_loading');\r\n\r\n    const data = await fetchJson(this.url);\r\n\r\n    this.element.classList.remove('sortable-table_loading');\r\n    \r\n    loading.classList.add(\"hide\");\r\n\r\n    return data;\r\n  }\r\n\r\n  addRows (data) {\r\n    this.data = data;\r\n\r\n    this.subElements.body.innerHTML = this.getTableRows(data);\r\n  }\r\n\r\n  update (data) {\r\n    const rows = document.createElement('div');\r\n\r\n    this.data = [...this.data, ...data];\r\n    rows.innerHTML = this.getTableRows(data);\r\n\r\n    // TODO: This is comparison of performance append vs insertAdjacentHTML\r\n    // console.time('timer');\r\n    // this.subElements.body.insertAdjacentHTML('beforeend', rows.innerHTML);\r\n    this.subElements.body.append(...rows.childNodes);\r\n    // console.timeEnd('timer');\r\n  }\r\n\r\n  getTableHeader() {\r\n    return `<div data-element=\"header\" class=\"sortable-table__header sortable-table__row\">\r\n      ${this.headersConfig.map(item => this.getHeaderRow(item)).join('')}\r\n    </div>`;\r\n  }\r\n\r\n  getHeaderRow ({id, title, sortable}) {\r\n    const order = this.sorted.id === id ? this.sorted.order : 'asc';\r\n    return `\r\n      <div class=\"sortable-table__cell\" data-id=\"${id}\" data-sortable=\"${sortable}\" data-order=\"${order}\">\r\n        <span>${title}</span>\r\n        ${this.getHeaderSortingArrow(id)}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  getHeaderSortingArrow (id) {\r\n    const isOrderExist = this.sorted.id === id ? this.sorted.order : '';\r\n\r\n    return isOrderExist\r\n      ? `<span data-element=\"arrow\" class=\"sortable-table__sort-arrow\">\r\n          <span class=\"sort-arrow\"></span>\r\n        </span>`\r\n      : '';\r\n  }\r\n\r\n  getTableBody(data) {\r\n    return `\r\n      <div data-element=\"body\" class=\"sortable-table__body\">\r\n        ${this.getTableRows(data)}\r\n      </div>`;\r\n  }\r\n\r\n  getTableRows (data) {\r\n    return data.map(item => {\r\n      if(this.clickableRow) {\r\n        return `<a href=\"/products/${item.id}\" class=\"sortable-table__row\">\r\n          ${this.getTableRow(item, data)}\r\n        </a>`\r\n      } else {\r\n        return `<div href=\"/products/${item.id}\" class=\"sortable-table__row\">\r\n          ${this.getTableRow(item, data)}\r\n        </div>`\r\n      }\r\n    }\r\n    ).join('');\r\n  }\r\n\r\n  getTableRow (item) {\r\n    const cells = this.headersConfig.map(({id, template}) => {\r\n      return {\r\n        id,\r\n        template\r\n      }\r\n    });\r\n\r\n    return cells.map(({id, template}) => {\r\n      return template\r\n        ? template(item[id])\r\n        : `<div class=\"sortable-table__cell\">${item[id]}</div>`\r\n    }).join('');\r\n  }\r\n\r\n  getTable() {\r\n    return `\r\n      <div class=\"sortable-table\">\r\n        ${this.getTableHeader()}\r\n        ${this.getTableBody(this.data)}\r\n\r\n        <div data-element=\"loading\" class=\"loading-line sortable-table__loading-line hide\"></div>\r\n\r\n        <div data-element=\"emptyPlaceholder\" class=\"sortable-table__empty-placeholder\">\r\n          <div class=\"sortable-table__placeholder-wrapper\">\r\n            <p>Не найдено товаров удовлетворяющих выбранному критерию</p>\r\n            <button data-element=\"clearFilterBtn\" type=\"button\" class=\"button-primary-outline\">Очистить фильтры</button>\r\n          </div>\r\n        </div>\r\n      </div>`;\r\n  }\r\n\r\n  initEventListeners () {\r\n    this.subElements.header.addEventListener('pointerdown', this.onSortClick);\r\n    document.addEventListener('scroll', this.onWindowScroll);\r\n  }\r\n\r\n  sortLocally (id, order) {\r\n    const sortedData = this.sortData(id, order);\r\n\r\n    this.subElements.body.innerHTML = this.getTableBody(sortedData);\r\n  }\r\n\r\n  async sortOnServer (id, order, start, end) {\r\n    const data = await this.loadData(id, order, start, end);\r\n\r\n    this.renderRows(data);\r\n  }\r\n\r\n  renderRows (data) {\r\n    if (data.length) {\r\n      this.element.classList.remove('sortable-table_empty');\r\n      this.addRows(data);\r\n    } else {\r\n      this.element.classList.add('sortable-table_empty');\r\n    }\r\n  }\r\n\r\n  sortData (id, order) {\r\n    const arr = [...this.data];\r\n    const column = this.headersConfig.find(item => item.id === id);\r\n    const {sortType, customSorting} = column;\r\n    const direction = order === 'asc' ? 1 : -1;\r\n\r\n    return arr.sort((a, b) => {\r\n      switch (sortType) {\r\n        case 'number':\r\n          return direction * (a[id] - b[id]);\r\n        case 'string':\r\n          return direction * a[id].localeCompare(b[id], 'ru');\r\n        case 'custom':\r\n          return direction * customSorting(a, b);\r\n        default:\r\n          return direction * (a[id] - b[id]);\r\n      }\r\n    });\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const elements = element.querySelectorAll('[data-element]');\r\n\r\n    return [...elements].reduce((accum, subElement) => {\r\n      accum[subElement.dataset.element] = subElement;\r\n\r\n      return accum;\r\n    }, {});\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n    document.removeEventListener('scroll', this.onWindowScroll);\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    this.subElements = {};\r\n  }\r\n}\r\n","const header = [\r\n  {\r\n    id: 'images',\r\n    title: 'Image',\r\n    sortable: false,\r\n    template: data => {\r\n      if (data.length > 0) {\r\n        return `\r\n            <div class=\"sortable-table__cell\">\r\n              <img class=\"sortable-table-image\" alt=\"Image\" src=\"${data[0].url}\">\r\n            </div>\r\n          `;\r\n      }\r\n    }\r\n  },\r\n  {\r\n    id: 'title',\r\n    title: 'Name',\r\n    sortable: true,\r\n    sortType: 'string'\r\n  },\r\n  {\r\n    id: 'subcategory',\r\n    id: 'subcategory',\r\n    title: 'Category',\r\n    sortable: false,\r\n    sortType: 'string',\r\n    template: data => {\r\n      return `<div class=\"sortable-table__cell\">\r\n     <span data-tooltip='\r\n     <div class=\"sortable-table-tooltip\">\r\n       <span class=\"sortable-table-tooltip__category\">${data.category.title}</span> /\r\n       <b class=\"sortable-table-tooltip__subcategory\">${data.title}</b>\r\n     </div>'>${data.title}</span>\r\n     </div>`;\r\n    }\r\n  },\r\n  {\r\n    id: 'quantity',\r\n    title: 'Quantity',\r\n    sortable: true,\r\n    sortType: 'number'\r\n  },\r\n  {\r\n    id: 'price',\r\n    title: 'Price',\r\n    sortable: true,\r\n    sortType: 'number',\r\n    template: data => '<div class=\"sortable-table__cell\">$' + data + '</div>'\r\n  },\r\n  {\r\n    id: 'status',\r\n    title: 'Status',\r\n    sortable: true,\r\n    sortType: 'number',\r\n    template: data => {\r\n      return `<div class=\"sortable-table__cell\">\r\n          ${data > 0 ? 'Active' : 'Inactive'}\r\n        </div>`;\r\n    }\r\n  }\r\n];\r\n\r\nexport default header;\r\n","export default class DoubleSlider {\r\n  element;\r\n  subElements = {};\r\n  shiftX;\r\n  dragging;\r\n\r\n  constructor({\r\n    min = 100,\r\n    max = 200,\r\n    formatValue = value => '$' + value,\r\n    selected = {\r\n      from: min,\r\n      to: max\r\n    }\r\n  } = {}) {\r\n    this.min = min;\r\n    this.max = max;\r\n    this.formatValue = formatValue;\r\n    this.selected = selected;\r\n    this.render();\r\n  }\r\n\r\n  get markup() {\r\n    const { from, to } = this.selected;\r\n    return `\r\n          <div class=\"range-slider\">\r\n              <span data-element=\"from\">${this.formatValue(from)}</span>\r\n              <div data-element=\"inner\" class=\"range-slider__inner\">\r\n                  <span data-element=\"progress\" class=\"range-slider__progress\"></span>\r\n                  <span data-element=\"thumbLeft\" class=\"range-slider__thumb-left\"></span>\r\n                  <span data-element=\"thumbRight\" class=\"range-slider__thumb-right\"></span>\r\n              </div>\r\n              <span data-element=\"to\">${this.formatValue(to)}</span>\r\n          </div>`;\r\n  }\r\n\r\n  render() {\r\n    const element = document.createElement('div');\r\n    element.innerHTML = this.markup;\r\n    this.element = element.firstElementChild;\r\n\r\n    this.subElements = this.getSubElements(this.element);\r\n\r\n    this.initEventListeners();\r\n\r\n    this.update();\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const allElements = element.querySelectorAll('[data-element]');\r\n    return [...allElements].reduce((acc, nextValue) => {\r\n      acc[nextValue.dataset.element] = nextValue;\r\n\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  initEventListeners() {\r\n    const { thumbLeft, thumbRight } = this.subElements;\r\n\r\n    thumbLeft.addEventListener('pointerdown', this.clickDown);\r\n    thumbRight.addEventListener('pointerdown', this.clickDown);\r\n  }\r\n\r\n  clickDown = e => {\r\n    e.preventDefault();\r\n    const thumbElement = e.target;\r\n\r\n    const { left, right } = thumbElement.getBoundingClientRect();\r\n    if (thumbElement === this.subElements.thumbLeft) {\r\n      this.shiftX = right - e.clientX;\r\n    } else {\r\n      this.shiftX = left - e.clientX;\r\n    }\r\n\r\n    this.dragging = thumbElement;\r\n\r\n    this.element.classList.add('range-slider_dragging');\r\n\r\n    document.addEventListener('pointermove', this.pointerMove);\r\n    document.addEventListener('pointerup', this.clickUp);\r\n  };\r\n\r\n  pointerMove = e => {\r\n    e.preventDefault();\r\n    const {\r\n      left: innerLeft,\r\n      right: innerRight,\r\n      width\r\n    } = this.subElements.inner.getBoundingClientRect();\r\n\r\n    if (this.dragging === this.subElements.thumbLeft) {\r\n      let newLeft = (e.clientX - innerLeft + this.shiftX) / width;\r\n\r\n      if (newLeft < 0) {\r\n        newLeft = 0;\r\n      }\r\n      newLeft *= 100;\r\n      let right = parseFloat(this.subElements.thumbRight.style.right);\r\n\r\n      if (newLeft + right > 100) {\r\n        newLeft = 100 - right;\r\n      }\r\n\r\n      this.dragging.style.left = this.subElements.progress.style.left = newLeft + '%';\r\n      this.subElements.from.innerHTML = this.formatValue(this.getValue().from);\r\n    }\r\n\r\n    if (this.dragging === this.subElements.thumbRight) {\r\n      let newRight = (innerRight - e.clientX - this.shiftX) / width;\r\n      if (newRight < 0) {\r\n        newRight = 0;\r\n      }\r\n      newRight *= 100;\r\n\r\n      let left = parseFloat(this.subElements.thumbLeft.style.left);\r\n\r\n      if (left + newRight > 100) {\r\n        newRight = 100 - left;\r\n      }\r\n\r\n      this.dragging.style.right = this.subElements.progress.style.right = newRight + '%';\r\n      this.subElements.to.innerHTML = this.formatValue(this.getValue().to);\r\n    }\r\n  };\r\n\r\n  clickUp = e => {\r\n    this.element.classList.remove('range-slider_dragging');\r\n\r\n    document.removeEventListener('pointermove', this.pointerMove);\r\n    document.removeEventListener('pointerup', this.clickUp);\r\n\r\n    this.element.dispatchEvent(\r\n      new CustomEvent('range-select', {\r\n        detail: this.getValue(),\r\n        bubbles: true\r\n      })\r\n    );\r\n  };\r\n\r\n  getValue() {\r\n    const rangeTotal = this.max - this.min;\r\n    const { left } = this.subElements.thumbLeft.style;\r\n    const { right } = this.subElements.thumbRight.style;\r\n\r\n    const from = Math.round(this.min + parseFloat(left) * 0.01 * rangeTotal);\r\n    const to = Math.round(this.max - parseFloat(right) * 0.01 * rangeTotal);\r\n\r\n    return { from, to };\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    document.removeEventListener('pointermove', this.onThumbPointerMove);\r\n    document.removeEventListener('pointerup', this.onThumbPointerUp);\r\n  }\r\n\r\n  update() {\r\n    const rangeTotal = this.max - this.min;\r\n    const left = Math.floor(((this.selected.from - this.min) / rangeTotal) * 100) + '%';\r\n    const right = Math.floor(((this.max - this.selected.to) / rangeTotal) * 100) + '%';\r\n\r\n\r\n    this.subElements.progress.style.left = left;\r\n    this.subElements.progress.style.right = right;\r\n\r\n    this.subElements.thumbLeft.style.left = left;\r\n    this.subElements.thumbRight.style.right = right;\r\n  }\r\n}\r\n","import fetchJson from '../../../utils/fetch-json.js';\r\nimport header from './products-headers.js';\r\n\r\nimport DoubleSlider from '../../../components/double-slider/index.js';\r\nimport SortableTable from '../../../components/sortable-table/index.js';\r\n\r\nexport default class Page {\r\n  element;\r\n  subElements = {};\r\n  components = {};\r\n  filterData = {\r\n    filterName: '',\r\n    filterStatus: '',\r\n    doubleSliderData: {\r\n      from: 0,\r\n      to: 0\r\n    }\r\n  };\r\n\r\n  initEventListeners() {\r\n    const { filter } = this.subElements;\r\n    const { doubleSlider } = this.components;\r\n    const { clearFilterBtn } = this.components.sortableTable.subElements;\r\n\r\n    filter.addEventListener('input', this.onFilterInput);\r\n\r\n    doubleSlider.element.addEventListener('range-select', this.onRangeSelect);\r\n\r\n    clearFilterBtn.addEventListener('pointerdown', this.clearFilters);\r\n  }\r\n\r\n  onFilterInput = event => {\r\n    const { filterName, filterStatus } = this.subElements;\r\n    const target = event.target;\r\n\r\n    if (target === filterName) {\r\n      this.filterData.filterName = target.value.trim();\r\n    } else if (target === filterStatus) {\r\n      this.filterData.filterStatus = target.value;\r\n    }\r\n\r\n    this.updateTable();\r\n  };\r\n\r\n  onRangeSelect = event => {\r\n    const { from, to } = event.detail;\r\n\r\n    this.filterData.doubleSliderData.from = from;\r\n    this.filterData.doubleSliderData.to = to;\r\n\r\n    this.updateTable();\r\n  };\r\n\r\n  clearFilters = () => {\r\n    const { filterName, filterStatus } = this.subElements;\r\n    const { min, max } = this.components.doubleSlider;\r\n\r\n    filterName.value = '';\r\n    filterStatus.value = '';\r\n\r\n    this.filterData.filterName = '';\r\n    this.filterData.filterStatus = '';\r\n\r\n    const {from, to} = this.components.doubleSlider.subElements;\r\n    from.innerHTML = `$${min}`;\r\n    to.innerHTML = `$${max}`;\r\n    this.components.doubleSlider.update();\r\n\r\n    this.filterData.doubleSliderData.from = 0;\r\n    this.filterData.doubleSliderData.to = 4000;\r\n\r\n    this.updateTable();\r\n  };\r\n\r\n  async updateTable() {\r\n    const { sorted, step } = this.components.sortableTable;\r\n\r\n    const updatedUrl = this.createURL();\r\n\r\n    this.components.sortableTable.url.href = updatedUrl;\r\n    await this.components.sortableTable.sortOnServer(sorted.id, sorted.order, 0, step);\r\n  }\r\n\r\n  createURL() {\r\n    const {\r\n      filterName,\r\n      filterStatus,\r\n      doubleSliderData: { from: minValue, to: maxValue }\r\n    } = this.filterData;\r\n\r\n    const url = new URL('api/rest/products?_embed=subcategory.category', process.env.BACKEND_URL);\r\n\r\n    url.searchParams.set('price_gte', minValue);\r\n    url.searchParams.set('price_lte', maxValue);\r\n    \r\n    if (filterName.trim() !== '') {\r\n      url.searchParams.set('title_like', filterName);\r\n    }\r\n    if (filterStatus != '') {\r\n      url.searchParams.set('status', filterStatus);\r\n    }\r\n\r\n    return url.href;\r\n  }\r\n\r\n  async render() {\r\n    const element = document.createElement('div');\r\n\r\n    element.innerHTML = this.template;\r\n    this.element = element.firstElementChild;\r\n\r\n    this.subElements = this.getSubElements(this.element);\r\n\r\n    this.initComponents();\r\n    await this.renderComponents();\r\n    this.initEventListeners();\r\n    return this.element;\r\n  }\r\n\r\n  get template() {\r\n    return `\r\n    <div class=\"products-list\">\r\n      <div class=\"content__top-panel\">\r\n        <h1 class=\"page-title\">Товары</h1>\r\n        <a href=\"/products/add\" class=\"button-primary\">Добавить товар</a>\r\n      </div>\r\n      <div class=\"content-box content-box_small\">\r\n      <form data-element=\"filter\" class=\"form-inline\">\r\n          <div class=\"form-group\">\r\n            <label class=\"form-label\">Сортировать по:</label>\r\n            <input type=\"text\" data-element=\"filterName\" class=\"form-control\" placeholder=\"Название товара\">\r\n          </div>\r\n          <div class=\"form-group\" data-element=\"sliderContainer\">\r\n            <label class=\"form-label\">Цена:</label>\r\n              <!-- //! DoubleSlider -->\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label class=\"form-label\">Статус:</label>\r\n            <select class=\"form-control\" data-element=\"filterStatus\">\r\n              <option value=\"\" selected=\"\">Любой</option>\r\n              <option value=\"1\">Активный</option>\r\n              <option value=\"0\">Неактивный</option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div data-element=\"productsContainer\" class=\"products-list__container\">\r\n        <!--//! SortableTable-->\r\n      </div>\r\n    </div>\r\n    `;\r\n  }\r\n\r\n  initComponents() {\r\n    this.components.doubleSlider = new DoubleSlider({ min: 0, max: 4000 });\r\n    // Init start values of double slider\r\n    this.filterData.doubleSliderData.from = this.components.doubleSlider.min;\r\n    this.filterData.doubleSliderData.to = this.components.doubleSlider.max;\r\n\r\n    this.components.sortableTable = new SortableTable(header, {\r\n      url: 'api/rest/products?_embed=subcategory.category'\r\n    });\r\n  }\r\n\r\n  async renderComponents() {\r\n    this.subElements.sliderContainer.append(this.components.doubleSlider.element);\r\n    this.subElements.productsContainer.append(this.components.sortableTable.element);\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const elements = element.querySelectorAll('[data-element]');\r\n    return [...elements].reduce((acc, next) => {\r\n      acc[next.dataset.element] = next;\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  remove() {\r\n    const { filter } = this.subElements;\r\n    const { clearFilterBtn } = this.components.sortableTable.subElements;\r\n    filter.removeEventListener('input', this.onFilterInput);\r\n    clearFilterBtn.removeEventListener('pointerdown', this.clearFilters);\r\n    this.element = null;\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    for (const component of Object.values(this.components)) {\r\n      component.destroy();\r\n    }\r\n  }\r\n}\r\n","// same as fetch, but throws FetchError in case of errors\r\n// status >= 400 is an error\r\n// network error / json error are errors\r\n\r\nexport default async function(url, params) {\r\n  let response;\r\n\r\n  try {\r\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\r\n    response = await fetch(url.toString(), params);\r\n  } catch(err) {\r\n    throw new FetchError(response, \"Network error has occurred.\");\r\n  }\r\n\r\n  let body;\r\n\r\n  if (!response.ok) {\r\n    let errorText = response.statusText; // Not Found (for 404)\r\n\r\n    try {\r\n      body = await response.json();\r\n\r\n      errorText = (body.error && body.error.message) || (body.data && body.data.error && body.data.error.message) || errorText;\r\n    } catch (error) { /* ignore failed body */ }\r\n\r\n    let message = `Error ${response.status}: ${errorText}`;\r\n\r\n    throw new FetchError(response, body, message);\r\n  }\r\n\r\n  try {\r\n    return await response.json();\r\n  } catch(err) {\r\n    throw new FetchError(response, null, err.message);\r\n  }\r\n}\r\n\r\nexport class FetchError extends Error {\r\n  name = \"FetchError\";\r\n\r\n  constructor(response, body, message) {\r\n    super(message);\r\n    this.response = response;\r\n    this.body = body;\r\n  }\r\n}\r\n\r\n// handle uncaught failed fetch through\r\nwindow.addEventListener('unhandledrejection', event => {\r\n  if (event.reason instanceof FetchError) {\r\n    alert(event.reason.message);\r\n  }\r\n});\r\n\r\n"],"sourceRoot":""}