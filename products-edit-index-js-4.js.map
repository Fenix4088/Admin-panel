{"version":3,"sources":["webpack:///./src/utils/escape-html.js","webpack:///./src/components/product-form/index.js","webpack:///./src/pages/products/edit/index.js","webpack:///./src/utils/fetch-json.js","webpack:///./src/components/notification/index.js","webpack:///./src/components/sortable-list/index.js","webpack:///./node_modules/uuid/dist/esm-browser/rng.js","webpack:///./node_modules/uuid/dist/esm-browser/regex.js","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js","webpack:///./node_modules/uuid/dist/esm-browser/validate.js","webpack:///./node_modules/uuid/dist/esm-browser/v1.js","webpack:///./node_modules/uuid/dist/esm-browser/parse.js","webpack:///./node_modules/uuid/dist/esm-browser/v35.js","webpack:///./node_modules/uuid/dist/esm-browser/md5.js","webpack:///./node_modules/uuid/dist/esm-browser/v3.js","webpack:///./node_modules/uuid/dist/esm-browser/v4.js","webpack:///./node_modules/uuid/dist/esm-browser/sha1.js","webpack:///./node_modules/uuid/dist/esm-browser/v5.js","webpack:///./node_modules/uuid/dist/esm-browser/nil.js","webpack:///./node_modules/uuid/dist/esm-browser/version.js"],"names":["string","replace","v4","uuidv4","require","ProductForm","constructor","productId","title","description","quantity","subcategory","images","status","price","discount","fileInput","document","createElement","type","accept","addEventListener","async","file","files","formData","FormData","uploadImage","imageListContainer","this","subElements","append","classList","add","disabled","result","fetchJson","method","headers","Authorization","process","body","getImageItem","data","link","name","remove","hidden","appendChild","click","event","preventDefault","save","initEventListeners","productForm","submitForm","dispatchEvent","id","CustomEvent","detail","element","product","getFormData","JSON","stringify","showNotificationMessage","error","console","excludedFields","formatToNumber","fields","Object","keys","defaultFormData","filter","item","includes","values","field","parseInt","querySelector","value","imagesHTMLCollection","querySelectorAll","image","push","url","src","source","alt","messageText","messageType","notificationMessage","NotificationMessage","style","position","bottom","right","show","categoriesPromise","loadCategoriesList","productPromise","loadProductData","categoriesData","productResponse","Promise","all","productData","categories","renderForm","setFormData","createImagesList","innerHTML","template","getEmptyTemplate","firstElementChild","getSubElements","createCategoriesSelect","map","category","subcategories","join","items","sortableList","SortableList","wrapper","escapeHtml","reduce","acc","dataset","excludedData","forEach","destroy","Page","match","render","initComponents","renderComponents","components","productFormWrapper","$element","accum","subElement","params","response","fetch","toString","err","FetchError","ok","errorText","statusText","json","message","Error","super","window","reason","alert","duration","notificationStatus","markup","target","setTimeout","which","itemElem","closest","dragStart","clientX","clientY","moveDraggingAt","children","top","firstElementTop","getBoundingClientRect","movePlaceholderAt","length","i","li","draggingElem","offsetHeight","height","scrollIfCloseToWindowEdge","dragStop","className","addItems","onPointerDown","elementInitialIndex","indexOf","pointerInitialShift","x","y","placeholderElem","width","offsetWidth","after","onDocumentPointerMove","onDocumentPointerUp","left","index","currentElement","insertBefore","placeholderIndex","replaceWith","removeEventListener","bubbles","from","to","scrollBy","documentElement","clientHeight","getRandomValues","crypto","bind","msCrypto","rnds8","Uint8Array","rng","uuid","test","byteToHex","substr","_nodeId","_clockseq","arr","offset","arguments","undefined","toLowerCase","TypeError","_lastMSecs","_lastNSecs","options","buf","b","Array","node","clockseq","seedBytes","random","msecs","Date","now","nsecs","dt","tl","tmh","n","v","slice","generateUUID","namespace","str","unescape","encodeURIComponent","bytes","charCodeAt","stringToBytes","set","hashfunc","version","DNS","URL","getOutputLength","inputLength8","safeAdd","lsw","md5cmn","q","a","s","t","num","cnt","md5ff","c","d","md5gg","md5hh","md5ii","v35","msg","input","output","length32","hex","charAt","md5ToHexEncodedArray","len","olda","oldb","oldc","oldd","wordsToMd5","length8","Uint32Array","bytesToWords","rnds","f","z","ROTL","K","H","isArray","prototype","call","l","N","Math","ceil","M","_i","j","pow","floor","_i2","W","_t","e","_t2","T"],"mappings":"sKAAeA,KAAUA,EACtBC,QAAQ,KAAM,SACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,Q,wHCLjB,MAAQC,GAAIC,GAAWC,EAAQ,IAMhB,MAAMC,EAgBnBC,YAAYC,GAAW,8CAdT,IAcS,kBAbZ,IAaY,oBAZV,IAYU,yBAXL,CAChBC,MAAO,GACPC,YAAa,GACbC,SAAU,EACVC,YAAa,GACbC,OAAQ,GACRC,OAAQ,EACRC,MAAO,IACPC,SAAU,IAGW,qBAkBT,KACZ,MAAMC,EAAYC,SAASC,cAAc,SACzCF,EAAUG,KAAO,OACjBH,EAAUI,OAAS,UAEnBJ,EAAUK,iBAAiB,SAAUC,UACnC,MAAOC,GAAQP,EAAUQ,MAEzB,GAAID,EAAM,CACR,MAAME,EAAW,IAAIC,UACf,YAAEC,EAAF,mBAAeC,GAAuBC,KAAKC,YAEjDL,EAASM,OAAO,QAASR,GACzBI,EAAYK,UAAUC,IAAI,cAC1BN,EAAYO,UAAW,EAEvB,MAAMC,QAAeC,YAAU,gCAAiC,CAC9DC,OAAQ,OACRC,QAAS,CACPC,cAAe,aAAF,OAAeC,oBAE9BC,KAAMhB,IAGRG,EAAmBG,OAAOF,KAAKa,aAAaP,EAAOQ,KAAKC,KAAMrB,EAAKsB,OACnElB,EAAYK,UAAUc,OAAO,cAC7BnB,EAAYO,UAAW,EAGvBlB,EAAU8B,YAId9B,EAAU+B,QAAS,EACnB9B,SAASwB,KAAKO,YAAYhC,GAC1BA,EAAUiC,UArDW,oBAwDVC,IACXA,EAAMC,iBACNtB,KAAKuB,SAzDLvB,KAAKtB,UAAYA,EAGnB8C,qBACE,MAAM,YAAE1B,EAAF,YAAe2B,EAAf,mBAA4B1B,GAAuBC,KAAKC,YAE9DwB,EAAYjC,iBAAiB,SAAUQ,KAAK0B,YAC5C5B,EAAYN,iBAAiB,cAAeQ,KAAKF,aAGnD6B,cAAcC,GACZ,MAAMP,EAAQrB,KAAKtB,UACf,IAAImD,YAAY,kBAAmB,CAAEC,OAAQF,IAC7C,IAAIC,YAAY,iBACpB7B,KAAK+B,QAAQJ,cAAcN,GA8C7B,aACE,MAAMW,EAAUhC,KAAKiC,cAErB,IACE,MAAM3B,QAAeC,YAAU,GAAD,OAAII,mCAAJ,qBAAgD,CAC5EH,OAAQR,KAAKtB,UAAY,QAAU,MACnC+B,QAAS,CACP,eAAgB,oBAElBG,KAAMsB,KAAKC,UAAUH,KAEvBhC,KAAKtB,UACDsB,KAAKoC,wBAAwB,gBAAiB,WAC9CpC,KAAKoC,wBAAwB,kBAAmB,WACpDpC,KAAK2B,cAAcrB,EAAOsB,IAC1B,MAAOS,GACPrC,KAAKoC,wBAAwB,6BAA8B,SAC3DE,QAAQD,MAAM,uBAAwBA,IAI1CJ,cACE,MAAM,YAAER,EAAF,mBAAe1B,GAAuBC,KAAKC,YAC3CsC,EAAiB,CAAC,UAClBC,EAAiB,CAAC,QAAS,WAAY,WAAY,UACnDC,EAASC,OAAOC,KAAK3C,KAAK4C,iBAAiBC,OAAOC,IAASP,EAAeQ,SAASD,IACnFE,EAAS,GAEf,IAAK,MAAMC,KAASR,EAClBO,EAAOC,GAAST,EAAeO,SAASE,GACpCC,SAASzB,EAAY0B,cAAZ,WAA8BF,IAASG,OAChD3B,EAAY0B,cAAZ,WAA8BF,IAASG,MAG7C,MAAMC,EAAuBtD,EAAmBuD,iBAAiB,6BAEjEN,EAAOjE,OAAS,GAChBiE,EAAOpB,GAAK5B,KAAKtB,UAEbsB,KAAKtB,YACPsE,EAAOpB,GAAKtD,KAGd,IAAK,MAAMiF,KAASF,EAClBL,EAAOjE,OAAOyE,KAAK,CACjBC,IAAKF,EAAMG,IACXC,OAAQJ,EAAMK,MAGlB,OAAOZ,EAGTZ,wBAAwByB,EAAaC,GACnC,MAAMC,EAAsB,IAAIC,IAAoBH,EAAa,CAAEvE,KAAMwE,IACzEC,EAAoBhC,QAAQkC,MAAMC,SAAW,QAC7CH,EAAoBhC,QAAQkC,MAAME,OAAlC,OACAJ,EAAoBhC,QAAQkC,MAAMG,MAAQ,OAE1CL,EAAoBM,OAGtB,eACE,MAAMC,EAAoBtE,KAAKuE,qBACzBC,EAAiBxE,KAAKtB,UACxBsB,KAAKyE,gBAAgBzE,KAAKtB,WAC1B,CAACsB,KAAK4C,kBACH8B,EAAgBC,SAAyBC,QAAQC,IAAI,CAC1DP,EACAE,KAGKM,GAAeH,EAUtB,OARA3E,KAAKJ,SAAWkF,EAChB9E,KAAK+E,WAAaL,EAElB1E,KAAKgF,aACLhF,KAAKiF,cACLjF,KAAKkF,mBACLlF,KAAKwB,qBAEExB,KAAK+B,QAGdiD,aACE,MAAMjD,EAAU3C,SAASC,cAAc,OACvC0C,EAAQoD,UAAYnF,KAAKJ,SAAWI,KAAKoF,SAAWpF,KAAKqF,mBAEzDrF,KAAK+B,QAAUA,EAAQuD,kBACvBtF,KAAKC,YAAcD,KAAKuF,eAAexD,GAGzC,eACE,06CAmCU/B,KAAKwF,yBAnCf,mZA+CyBxF,KAAK4C,gBAAgB3D,MA/C9C,mUAyDyBe,KAAK4C,gBAAgB1D,SAzD9C,qWAoEuBc,KAAK4C,gBAAgB/D,SApE5C,kdA+EUmB,KAAKtB,UAAY,YAAc,WA/EzC,gFAuFF2G,mBACE,0IAOFG,yBACE,OAAOxF,KAAK+E,WAAWU,IAAIC,GAClBA,EAASC,cACbF,IAAI3G,GACH,yBAAyBA,EAAY8C,GAArC,aAA4C8D,EAAS/G,MAArD,iBAAmEG,EAAYH,MAA/E,cAEDiH,KAAK,KAIZV,mBACE,MAAM,mBAAEnF,GAAuBC,KAAKC,aAC9B,OAAElB,GAAWiB,KAAKJ,SAClBiG,EAAQ9G,EAAO0G,IAAIlC,GAASvD,KAAKa,aAAa0C,EAAME,IAAKF,EAAMI,SAC/DmC,EAAe,IAAIC,IAAa,CAAEF,UACxC9F,EAAmBG,OAAO4F,EAAa/D,SAGzClB,aAAa4C,EAAKzC,GAChB,MAAMgF,EAAU5G,SAASC,cAAc,OAevC,OAdA2G,EAAQb,UAAR,+PAIqDc,EAAWjF,GAJhE,kBAI+EiF,EAC7ExC,GALF,iCAOgBwC,EAAWjF,GAP3B,wLAcOgF,EAAQV,kBAGjBC,eAAexD,GAEb,MAAO,IADUA,EAAQuB,iBAAiB,mBACrB4C,OAAO,CAACC,EAAKrD,KAChCqD,EAAIrD,EAAKsD,QAAQrE,SAAWe,EACrBqD,GACN,IAGL,2BACE,aAAa5F,YAAU,GAAD,OACjBI,mCADiB,uDAKxB,sBAAsBiB,GACpB,aAAarB,YAAU,GAAD,OAAII,mCAAJ,gCAAmDiB,IAG3EqD,cACE,MAAM,YAAExD,GAAgBzB,KAAKC,YACvBoG,EAAe,CAAC,UACP3D,OAAOC,KAAK3C,KAAK4C,iBAAiBC,OAAOC,IAASuD,EAAatD,SAASD,IAChFwD,QAAQrD,IACbxB,EAAY0B,cAAZ,WAA8BF,IAASG,MACrCpD,KAAKJ,SAASqD,IAAUjD,KAAK4C,gBAAgBK,KAInDsD,UACEvG,KAAKiB,SACLjB,KAAK+B,QAAU,KACf/B,KAAKC,YAAc,KAGrBgB,SACEjB,KAAK+B,QAAQd,U,wHCpVF,MAAMuF,EAMnB/H,YAAYgI,GAAO,4CAJP,MAIO,qBAHL,IAGK,oBAFN,IAGXzG,KAAKyG,MAAQA,EAGfC,SACE1G,KAAKtB,UAAYsB,KAAKyG,MAAM,GAC5B,MAAM1E,EAAU3C,SAASC,cAAc,OASvC,OAPA0C,EAAQoD,UAAYnF,KAAKoF,SAEzBpF,KAAK+B,QAAUA,EAAQuD,kBACvBtF,KAAKC,YAAcD,KAAKuF,eAAevF,KAAK+B,SAC5C/B,KAAK2G,iBACL3G,KAAK4G,mBAEE5G,KAAK+B,QAGd,yBACE,MAAM,YAAEN,GAAgBzB,KAAK6G,YACvB,mBAAEC,GAAuB9G,KAAKC,YAEpCwB,EAAYuD,mBACNvD,EAAYiF,SAClBI,EAAmB5G,OAAOuB,EAAYM,SAGxC,eACE,sLAIsD/B,KAAKtB,UAAY,OAAS,MAJhF,gMAcFiI,iBACE3G,KAAK6G,WAAWpF,YAAc,IAAIjD,EAAYwB,KAAKtB,WAGrD6G,eAAewB,GAGb,MAAO,IAFUA,EAASzD,iBAAiB,mBAEtB4C,OAAO,CAACc,EAAOC,KAClCD,EAAMC,EAAWb,QAAQrE,SAAWkF,EAE7BD,GACN,O,+BC1DQ,mBAAevD,EAAKyD,GACjC,IAAIC,EASAvG,EAPJ,IAEEuG,QAAiBC,MAAM3D,EAAI4D,WAAYH,GACvC,MAAMI,GACN,MAAM,IAAIC,EAAWJ,EAAU,+BAKjC,IAAKA,EAASK,GAAI,CAChB,IAAIC,EAAYN,EAASO,WAEzB,IACE9G,QAAauG,EAASQ,OAEtBF,EAAa7G,EAAKyB,OAASzB,EAAKyB,MAAMuF,SAAahH,EAAKE,MAAQF,EAAKE,KAAKuB,OAASzB,EAAKE,KAAKuB,MAAMuF,SAAYH,EAC/G,MAAOpF,IAET,IAAIuF,EAAU,SAAH,OAAYT,EAASnI,OAArB,aAAgCyI,GAE3C,MAAM,IAAIF,EAAWJ,EAAUvG,EAAMgH,GAGvC,IACE,aAAaT,EAASQ,OACtB,MAAML,GACN,MAAM,IAAIC,EAAWJ,EAAU,KAAMG,EAAIM,WAItC,MAAML,UAAmBM,MAG9BpJ,YAAY0I,EAAUvG,EAAMgH,G,UAC1BE,MAAMF,G,EAHD,c,EAE8B,U,EAAA,M,sFAEnC5H,KAAKmH,SAAWA,EAChBnH,KAAKY,KAAOA,GAKhBmH,OAAOvI,iBAAiB,qBAAsB6B,IACxCA,EAAM2G,kBAAkBT,GAC1BU,MAAM5G,EAAM2G,OAAOJ,Y,wLClDR,MAAM5D,EAInBvF,YAAYoF,GAAa,SAAEqE,EAAW,IAAb,KAAmB5I,EAAO,WAAc,IAAI,yBAC/D0E,EAAoBmE,oBACtBnE,EAAoBmE,mBAAmBlH,SAEzCjB,KAAK6D,YAAcA,EACnB7D,KAAKkI,SAAWA,EAChBlI,KAAKV,KAAOA,EACZU,KAAK0G,SAGP,aACE,qDACiC1G,KAAKV,KADtC,4BAC8DU,KAAKkI,SAAW,IAD9E,uIAIyClI,KAAKV,KAJ9C,4EAMYU,KAAK6D,YANjB,gEAaF6C,SACE,MAAM3E,EAAU3C,SAASC,cAAc,OACvC0C,EAAQoD,UAAYnF,KAAKoI,OACzBpI,KAAK+B,QAAUA,EAAQuD,kBAEvBtB,EAAoBmE,mBAAqBnI,KAAK+B,QAGhDsC,KAAKgE,EAASjJ,SAASwB,MACrByH,EAAOnI,OAAOF,KAAK+B,SACnBuG,WAAW,KACTtI,KAAKiB,SACLjB,KAAKuG,WACJvG,KAAKkI,UAGVjH,SACEjB,KAAK+B,QAAQd,SAGfsF,UACEvG,KAAK+B,QAAU,KACfiC,EAAoBmE,mBAAqB,M,EAlDxBnE,E,qNCAN,MAAM+B,EAOnBtH,aAAY,MAAEoH,EAAQ,IAAO,IAAI,2FAJX,IAIW,sFAyBhBxE,IACf,GAAoB,IAAhBA,EAAMkH,MAER,OAAO,EAGT,MAAMC,EAAWnH,EAAMgH,OAAOI,QAAQ,wBAElCD,IACFnH,EAAMC,iBACFD,EAAMgH,OAAOI,QAAQ,uBACvBzI,KAAK0I,UAAUF,EAAUnH,GAGvBA,EAAMgH,OAAOI,QAAQ,yBACvBD,EAASvH,YAxCkB,+BAkFRI,IACvB,MAAM,QAAEsH,EAAF,QAAWC,GAAYvH,EAE7BrB,KAAK6I,eAAeF,EAASC,GAE7B,MAAM,kBAAEtD,EAAF,SAAqBwD,GAAa9I,KAAK+B,SACrCgH,IAAKC,GAAoB1D,EAAkB2D,yBAC7C,OAAE9E,GAAWnE,KAAK+B,QAAQkH,wBAEhC,GAAIL,EAAUI,EACZhJ,KAAKkJ,kBAAkB,QAClB,GAAIN,EAAUzE,EACnBnE,KAAKkJ,kBAAkBJ,EAASK,aAEhC,IAAK,IAAIC,EAAI,EAAGA,EAAIN,EAASK,OAAQC,IAAK,CACxC,MAAMC,EAAKP,EAASM,GAEpB,GAAIC,IAAOrJ,KAAKsJ,aAAc,CAC5B,MAAM,IAAEP,EAAF,OAAO5E,GAAWkF,EAAGJ,yBACnBM,aAAcC,GAAWH,EAEjC,GAAIT,EAAUG,GAAOH,EAAUzE,EAAQ,CAErC,GAAIyE,EAAUG,EAAMS,EAAS,EAAG,CAE9BxJ,KAAKkJ,kBAAkBE,GACvB,MAGApJ,KAAKkJ,kBAAkBE,EAAI,GAC3B,QAOVpJ,KAAKyJ,0BAA0Bb,KAvHA,6BAuIVvH,IACrBrB,KAAK0J,aAvIL1J,KAAK6F,MAAQA,EAEb7F,KAAK0G,SAGPA,SACE1G,KAAK+B,QAAU3C,SAASC,cAAc,MACtCW,KAAK+B,QAAQ4H,UAAY,gBAEzB3J,KAAK4J,WACL5J,KAAKwB,qBAGPA,qBACExB,KAAK+B,QAAQvC,iBAAiB,cAAeQ,KAAK6J,eAGpDD,WACE,IAAK,IAAI9G,KAAQ9C,KAAK6F,MACpB/C,EAAK3C,UAAUC,IAAI,uBAErBJ,KAAK+B,QAAQ7B,UAAUF,KAAK6F,OAuB9B6C,UAAUF,EAAUnH,GAClB,MAAM,QAAEsH,EAAF,QAAWC,GAAYvH,EAE7BrB,KAAK8J,oBAAsB,IAAI9J,KAAK+B,QAAQ+G,UAAUiB,QAAQvB,GAE9DxI,KAAKgK,oBAAsB,CACzBC,EAAGtB,EAAUH,EAASS,wBAAwBgB,EAC9CC,EAAGtB,EAAUJ,EAASS,wBAAwBiB,GAGhDlK,KAAKsJ,aAAed,EAGpBxI,KAAKmK,gBAAkB/K,SAASC,cAAc,MAC9CW,KAAKmK,gBAAgBR,UAAY,6BAIjCnB,EAASvE,MAAMmG,MAAf,UAA0B5B,EAAS6B,YAAnC,MACA7B,EAASvE,MAAMuF,OAAf,UAA2BhB,EAASe,aAApC,MAEAvJ,KAAKmK,gBAAgBlG,MAAMmG,MAAQ5B,EAASvE,MAAMmG,MAClDpK,KAAKmK,gBAAgBlG,MAAMuF,OAAShB,EAASvE,MAAMuF,OAEnDhB,EAASrI,UAAUC,IAAI,gCAEvBoI,EAAS8B,MAAMtK,KAAKmK,iBAGpBnK,KAAK+B,QAAQ7B,OAAOsI,GAEpBxI,KAAK6I,eAAeF,EAASC,GAE7BxJ,SAASI,iBAAiB,cAAeQ,KAAKuK,uBAC9CnL,SAASI,iBAAiB,YAAaQ,KAAKwK,qBA2C9C3B,eAAeF,EAASC,GACtB5I,KAAKsJ,aAAarF,MAAMwG,KAAO9B,EAAU3I,KAAKgK,oBAAoBC,EAAI,KACtEjK,KAAKsJ,aAAarF,MAAM8E,IAAMH,EAAU5I,KAAKgK,oBAAoBE,EAAI,KAGvEhB,kBAAkBwB,GAChB,MAAMC,EAAiB3K,KAAK+B,QAAQ+G,SAAS4B,GAEzCC,IAAmB3K,KAAKmK,iBAC1BnK,KAAK+B,QAAQ6I,aAAa5K,KAAKmK,gBAAiBQ,GAQpDjB,WACE,MAAMmB,EAAmB,IAAI7K,KAAK+B,QAAQ+G,UAAUiB,QAClD/J,KAAKmK,iBAIPnK,KAAKmK,gBAAgBW,YAAY9K,KAAKsJ,cACtCtJ,KAAKsJ,aAAanJ,UAAUc,OAAO,gCAEnCjB,KAAKsJ,aAAarF,MAAMwG,KAAO,GAC/BzK,KAAKsJ,aAAarF,MAAM8E,IAAM,GAC9B/I,KAAKsJ,aAAarF,MAAMmG,MAAQ,GAChCpK,KAAKsJ,aAAarF,MAAMuF,OAAS,GAEjCpK,SAAS2L,oBAAoB,cAAe/K,KAAKuK,uBACjDnL,SAAS2L,oBAAoB,YAAa/K,KAAKwK,qBAE/CxK,KAAKsJ,aAAe,KAEhBuB,IAAqB7K,KAAK8J,qBAC5B9J,KAAK+B,QAAQJ,cACX,IAAIE,YAAY,wBAAyB,CACvCmJ,SAAS,EACTlJ,OAAQ,CACNmJ,KAAMjL,KAAK8J,oBACXoB,GAAIL,MAOdpB,0BAA0Bb,GAIpBA,EAFc,GAGhBb,OAAOoD,SAAS,GAJK,IAKZvC,EAAUxJ,SAASgM,gBAAgBC,aAJ5B,IAKhBtD,OAAOoD,SAAS,EANK,IAUzBlK,SACEjB,KAAK+B,QAAQd,SACb7B,SAAS2L,oBAAoB,cAAe/K,KAAKuK,uBACjDnL,SAAS2L,oBAAoB,YAAa/K,KAAKwK,qBAGjDjE,UACEvG,KAAKiB,Y,sXC/LT,IAAIqK,EAAoC,oBAAXC,QAA0BA,OAAOD,iBAAmBC,OAAOD,gBAAgBE,KAAKD,SAA+B,oBAAbE,UAAgE,mBAA7BA,SAASH,iBAAkCG,SAASH,gBAAgBE,KAAKC,UACvOC,EAAQ,IAAIC,WAAW,IACZ,SAASC,IACtB,IAAKN,EACH,MAAM,IAAIzD,MAAM,4GAGlB,OAAOyD,EAAgBI,GCZV,4HCQf,ICFe,MAJf,SAAkBG,GAChB,MAAuB,iBAATA,GAAqB,EAAMC,KAAKD,IDG5CE,EAAY,GAEP,EAAI,EAAG,EAAI,MAAO,EACzBA,EAAUvI,MAAM,EAAI,KAAO6D,SAAS,IAAI2E,OAAO,IAoBlC,IEvBXC,EAEAC,EFqBW,EAjBf,SAAmBC,GACjB,IAAIC,EAASC,UAAUlD,OAAS,QAAsBmD,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAG7ER,GAAQE,EAAUI,EAAIC,EAAS,IAAML,EAAUI,EAAIC,EAAS,IAAML,EAAUI,EAAIC,EAAS,IAAML,EAAUI,EAAIC,EAAS,IAAM,IAAML,EAAUI,EAAIC,EAAS,IAAML,EAAUI,EAAIC,EAAS,IAAM,IAAML,EAAUI,EAAIC,EAAS,IAAML,EAAUI,EAAIC,EAAS,IAAM,IAAML,EAAUI,EAAIC,EAAS,IAAML,EAAUI,EAAIC,EAAS,IAAM,IAAML,EAAUI,EAAIC,EAAS,KAAOL,EAAUI,EAAIC,EAAS,KAAOL,EAAUI,EAAIC,EAAS,KAAOL,EAAUI,EAAIC,EAAS,KAAOL,EAAUI,EAAIC,EAAS,KAAOL,EAAUI,EAAIC,EAAS,MAAMG,cAMzf,IAAK,EAASV,GACZ,MAAMW,UAAU,+BAGlB,OAAOX,GEfLY,EAAa,EACbC,EAAa,EAkFF,MAhFf,SAAYC,EAASC,EAAKR,GACxB,IAAIhD,EAAIwD,GAAOR,GAAU,EACrBS,EAAID,GAAO,IAAIE,MAAM,IAErBC,GADJJ,EAAUA,GAAW,IACFI,MAAQd,EACvBe,OAAgCV,IAArBK,EAAQK,SAAyBL,EAAQK,SAAWd,EAInE,GAAY,MAARa,GAA4B,MAAZC,EAAkB,CACpC,IAAIC,EAAYN,EAAQO,SAAWP,EAAQf,KAAOA,KAEtC,MAARmB,IAEFA,EAAOd,EAAU,CAAgB,EAAfgB,EAAU,GAAWA,EAAU,GAAIA,EAAU,GAAIA,EAAU,GAAIA,EAAU,GAAIA,EAAU,KAG3F,MAAZD,IAEFA,EAAWd,EAAiD,OAApCe,EAAU,IAAM,EAAIA,EAAU,KAQ1D,IAAIE,OAA0Bb,IAAlBK,EAAQQ,MAAsBR,EAAQQ,MAAQC,KAAKC,MAG3DC,OAA0BhB,IAAlBK,EAAQW,MAAsBX,EAAQW,MAAQZ,EAAa,EAEnEa,EAAKJ,EAAQV,GAAca,EAAQZ,GAAc,IAarD,GAXIa,EAAK,QAA0BjB,IAArBK,EAAQK,WACpBA,EAAWA,EAAW,EAAI,QAKvBO,EAAK,GAAKJ,EAAQV,SAAiCH,IAAlBK,EAAQW,QAC5CA,EAAQ,GAINA,GAAS,IACX,MAAM,IAAIzF,MAAM,mDAGlB4E,EAAaU,EACbT,EAAaY,EACbpB,EAAYc,EAIZ,IAAIQ,GAA4B,KAAb,WAFnBL,GAAS,cAE+BG,GAAS,WACjDT,EAAEzD,KAAOoE,IAAO,GAAK,IACrBX,EAAEzD,KAAOoE,IAAO,GAAK,IACrBX,EAAEzD,KAAOoE,IAAO,EAAI,IACpBX,EAAEzD,KAAY,IAALoE,EAET,IAAIC,EAAMN,EAAQ,WAAc,IAAQ,UACxCN,EAAEzD,KAAOqE,IAAQ,EAAI,IACrBZ,EAAEzD,KAAa,IAANqE,EAETZ,EAAEzD,KAAOqE,IAAQ,GAAK,GAAM,GAE5BZ,EAAEzD,KAAOqE,IAAQ,GAAK,IAEtBZ,EAAEzD,KAAO4D,IAAa,EAAI,IAE1BH,EAAEzD,KAAkB,IAAX4D,EAET,IAAK,IAAIU,EAAI,EAAGA,EAAI,IAAKA,EACvBb,EAAEzD,EAAIsE,GAAKX,EAAKW,GAGlB,OAAOd,GAAO,EAAUC,ICzDX,MAhCf,SAAehB,GACb,IAAK,EAASA,GACZ,MAAMW,UAAU,gBAGlB,IAAImB,EACAxB,EAAM,IAAIR,WAAW,IAuBzB,OArBAQ,EAAI,IAAMwB,EAAIzK,SAAS2I,EAAK+B,MAAM,EAAG,GAAI,OAAS,GAClDzB,EAAI,GAAKwB,IAAM,GAAK,IACpBxB,EAAI,GAAKwB,IAAM,EAAI,IACnBxB,EAAI,GAAS,IAAJwB,EAETxB,EAAI,IAAMwB,EAAIzK,SAAS2I,EAAK+B,MAAM,EAAG,IAAK,OAAS,EACnDzB,EAAI,GAAS,IAAJwB,EAETxB,EAAI,IAAMwB,EAAIzK,SAAS2I,EAAK+B,MAAM,GAAI,IAAK,OAAS,EACpDzB,EAAI,GAAS,IAAJwB,EAETxB,EAAI,IAAMwB,EAAIzK,SAAS2I,EAAK+B,MAAM,GAAI,IAAK,OAAS,EACpDzB,EAAI,GAAS,IAAJwB,EAGTxB,EAAI,KAAOwB,EAAIzK,SAAS2I,EAAK+B,MAAM,GAAI,IAAK,KAAO,cAAgB,IACnEzB,EAAI,IAAMwB,EAAI,WAAc,IAC5BxB,EAAI,IAAMwB,IAAM,GAAK,IACrBxB,EAAI,IAAMwB,IAAM,GAAK,IACrBxB,EAAI,IAAMwB,IAAM,EAAI,IACpBxB,EAAI,IAAU,IAAJwB,EACHxB,GChBF,IAEQ,kBACb,SAAS0B,EAAazK,EAAO0K,EAAWlB,EAAKR,GAS3C,GARqB,iBAAVhJ,IACTA,EAjBN,SAAuB2K,GACrBA,EAAMC,SAASC,mBAAmBF,IAIlC,IAFA,IAAIG,EAAQ,GAEH9E,EAAI,EAAGA,EAAI2E,EAAI5E,SAAUC,EAChC8E,EAAM1K,KAAKuK,EAAII,WAAW/E,IAG5B,OAAO8E,EAQKE,CAAchL,IAGC,iBAAd0K,IACTA,EAAY,EAAMA,IAGK,KAArBA,EAAU3E,OACZ,MAAMqD,UAAU,oEAMlB,IAAI0B,EAAQ,IAAIvC,WAAW,GAAKvI,EAAM+F,QAOtC,GANA+E,EAAMG,IAAIP,GACVI,EAAMG,IAAIjL,EAAO0K,EAAU3E,SAC3B+E,EAAQI,EAASJ,IACX,GAAgB,GAAXA,EAAM,GAAYK,EAC7BL,EAAM,GAAgB,GAAXA,EAAM,GAAY,IAEzBtB,EAAK,CACPR,EAASA,GAAU,EAEnB,IAAK,IAAIhD,EAAI,EAAGA,EAAI,KAAMA,EACxBwD,EAAIR,EAAShD,GAAK8E,EAAM9E,GAG1B,OAAOwD,EAGT,OAAO,EAAUsB,GAInB,IACEL,EAAa7M,KAAOA,EACpB,MAAOsG,IAKT,OAFAuG,EAAaW,IA7CE,uCA8CfX,EAAaY,IA7CE,uCA8CRZ,GCNT,SAASa,EAAgBC,GACvB,OAAwC,IAAhCA,EAAe,KAAO,GAAK,GAAU,EAuH/C,SAASC,EAAQ3E,EAAGC,GAClB,IAAI2E,GAAW,MAAJ5E,IAAmB,MAAJC,GAE1B,OADWD,GAAK,KAAOC,GAAK,KAAO2E,GAAO,KAC5B,GAAW,MAANA,EAerB,SAASC,EAAOC,EAAGC,EAAGnC,EAAG5C,EAAGgF,EAAGC,GAC7B,OAAON,GATcO,EASQP,EAAQA,EAAQI,EAAGD,GAAIH,EAAQ3E,EAAGiF,OATrCE,EAS0CH,GARhDE,IAAQ,GAAKC,EAQuCvC,GAT1E,IAAuBsC,EAAKC,EAY5B,SAASC,EAAML,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAGgF,EAAGC,GAC/B,OAAOJ,EAAOjC,EAAIyC,GAAKzC,EAAI0C,EAAGP,EAAGnC,EAAG5C,EAAGgF,EAAGC,GAG5C,SAASM,EAAMR,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAGgF,EAAGC,GAC/B,OAAOJ,EAAOjC,EAAI0C,EAAID,GAAKC,EAAGP,EAAGnC,EAAG5C,EAAGgF,EAAGC,GAG5C,SAASO,EAAMT,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAGgF,EAAGC,GAC/B,OAAOJ,EAAOjC,EAAIyC,EAAIC,EAAGP,EAAGnC,EAAG5C,EAAGgF,EAAGC,GAGvC,SAASQ,EAAMV,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAGgF,EAAGC,GAC/B,OAAOJ,EAAOQ,GAAKzC,GAAK0C,GAAIP,EAAGnC,EAAG5C,EAAGgF,EAAGC,GAG3B,ICnNA,EADNS,EAAI,KAAM,IDkBnB,SAAazB,GACX,GAAqB,iBAAVA,EAAoB,CAC7B,IAAI0B,EAAM5B,SAASC,mBAAmBC,IAEtCA,EAAQ,IAAIvC,WAAWiE,EAAIzG,QAE3B,IAAK,IAAIC,EAAI,EAAGA,EAAIwG,EAAIzG,SAAUC,EAChC8E,EAAM9E,GAAKwG,EAAIzB,WAAW/E,GAI9B,OAOF,SAA8ByG,GAK5B,IAJA,IAAIC,EAAS,GACTC,EAA0B,GAAfF,EAAM1G,OAGZC,EAAI,EAAGA,EAAI2G,EAAU3G,GAAK,EAAG,CACpC,IAAIa,EAAI4F,EAAMzG,GAAK,KAAOA,EAAI,GAAK,IAC/B4G,EAAM9M,SAJC,mBAIe+M,OAAOhG,IAAM,EAAI,IAJhC,mBAI+CgG,OAAW,GAAJhG,GAAW,IAC5E6F,EAAOtM,KAAKwM,GAGd,OAAOF,EAlBAI,CAiCT,SAAoBjG,EAAGkG,GAErBlG,EAAEkG,GAAO,IAAM,KAAQA,EAAM,GAC7BlG,EAAEyE,EAAgByB,GAAO,GAAKA,EAM9B,IALA,IAAInB,EAAI,WACJnC,GAAK,UACLyC,GAAK,WACLC,EAAI,UAECnG,EAAI,EAAGA,EAAIa,EAAEd,OAAQC,GAAK,GAAI,CACrC,IAAIgH,EAAOpB,EACPqB,EAAOxD,EACPyD,EAAOhB,EACPiB,EAAOhB,EACXP,EAAIK,EAAML,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,GAAI,GAAI,WAChCmG,EAAIF,EAAME,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,GAAI,IAAK,WACrCkG,EAAID,EAAMC,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,GAAI,GAAI,WACpCyD,EAAIwC,EAAMxC,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,GAAI,IAAK,YACrC4F,EAAIK,EAAML,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,GAAI,GAAI,WACpCmG,EAAIF,EAAME,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,GAAI,GAAI,YACpCkG,EAAID,EAAMC,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,GAAI,IAAK,YACrCyD,EAAIwC,EAAMxC,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,GAAI,IAAK,UACrC4F,EAAIK,EAAML,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,GAAI,EAAG,YACnCmG,EAAIF,EAAME,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,GAAI,IAAK,YACrCkG,EAAID,EAAMC,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,IAAK,IAAK,OACtCyD,EAAIwC,EAAMxC,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,IAAK,IAAK,YACtC4F,EAAIK,EAAML,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,IAAK,EAAG,YACpCmG,EAAIF,EAAME,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,IAAK,IAAK,UACtCkG,EAAID,EAAMC,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,IAAK,IAAK,YACtCyD,EAAIwC,EAAMxC,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,IAAK,GAAI,YACrC4F,EAAIQ,EAAMR,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,GAAI,GAAI,WACpCmG,EAAIC,EAAMD,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,GAAI,GAAI,YACpCkG,EAAIE,EAAMF,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,IAAK,GAAI,WACrCyD,EAAI2C,EAAM3C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,GAAI,IAAK,WACjC4F,EAAIQ,EAAMR,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,GAAI,GAAI,WACpCmG,EAAIC,EAAMD,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,IAAK,EAAG,UACpCkG,EAAIE,EAAMF,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,IAAK,IAAK,WACtCyD,EAAI2C,EAAM3C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,GAAI,IAAK,WACrC4F,EAAIQ,EAAMR,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,GAAI,EAAG,WACnCmG,EAAIC,EAAMD,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,IAAK,GAAI,YACrCkG,EAAIE,EAAMF,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,GAAI,IAAK,WACrCyD,EAAI2C,EAAM3C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,GAAI,GAAI,YACpC4F,EAAIQ,EAAMR,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,IAAK,GAAI,YACrCmG,EAAIC,EAAMD,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,GAAI,GAAI,UACpCkG,EAAIE,EAAMF,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,GAAI,GAAI,YACpCyD,EAAI2C,EAAM3C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,IAAK,IAAK,YACtC4F,EAAIS,EAAMT,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,GAAI,GAAI,QACpCmG,EAAIE,EAAMF,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,GAAI,IAAK,YACrCkG,EAAIG,EAAMH,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,IAAK,GAAI,YACrCyD,EAAI4C,EAAM5C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,IAAK,IAAK,UACtC4F,EAAIS,EAAMT,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,GAAI,GAAI,YACpCmG,EAAIE,EAAMF,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,GAAI,GAAI,YACpCkG,EAAIG,EAAMH,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,GAAI,IAAK,WACrCyD,EAAI4C,EAAM5C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,IAAK,IAAK,YACtC4F,EAAIS,EAAMT,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,IAAK,EAAG,WACpCmG,EAAIE,EAAMF,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,GAAI,IAAK,WACjCkG,EAAIG,EAAMH,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,GAAI,IAAK,WACrCyD,EAAI4C,EAAM5C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,GAAI,GAAI,UACpC4F,EAAIS,EAAMT,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,GAAI,GAAI,WACpCmG,EAAIE,EAAMF,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,IAAK,IAAK,WACtCkG,EAAIG,EAAMH,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,IAAK,GAAI,WACrCyD,EAAI4C,EAAM5C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,GAAI,IAAK,WACrC4F,EAAIU,EAAMV,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,GAAI,GAAI,WAChCmG,EAAIG,EAAMH,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,GAAI,GAAI,YACpCkG,EAAII,EAAMJ,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,IAAK,IAAK,YACtCyD,EAAI6C,EAAM7C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,GAAI,IAAK,UACrC4F,EAAIU,EAAMV,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,IAAK,EAAG,YACpCmG,EAAIG,EAAMH,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,GAAI,IAAK,YACrCkG,EAAII,EAAMJ,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,IAAK,IAAK,SACtCyD,EAAI6C,EAAM7C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,GAAI,IAAK,YACrC4F,EAAIU,EAAMV,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,GAAI,EAAG,YACnCmG,EAAIG,EAAMH,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,IAAK,IAAK,UACtCkG,EAAII,EAAMJ,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,GAAI,IAAK,YACrCyD,EAAI6C,EAAM7C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,IAAK,GAAI,YACrC4F,EAAIU,EAAMV,EAAGnC,EAAGyC,EAAGC,EAAGtF,EAAEb,EAAI,GAAI,GAAI,WACpCmG,EAAIG,EAAMH,EAAGP,EAAGnC,EAAGyC,EAAGrF,EAAEb,EAAI,IAAK,IAAK,YACtCkG,EAAII,EAAMJ,EAAGC,EAAGP,EAAGnC,EAAG5C,EAAEb,EAAI,GAAI,GAAI,WACpCyD,EAAI6C,EAAM7C,EAAGyC,EAAGC,EAAGP,EAAG/E,EAAEb,EAAI,GAAI,IAAK,WACrC4F,EAAIJ,EAAQI,EAAGoB,GACfvD,EAAI+B,EAAQ/B,EAAGwD,GACff,EAAIV,EAAQU,EAAGgB,GACff,EAAIX,EAAQW,EAAGgB,GAGjB,MAAO,CAACvB,EAAGnC,EAAGyC,EAAGC,GArHWiB,CA6H9B,SAAsBX,GACpB,GAAqB,IAAjBA,EAAM1G,OACR,MAAO,GAMT,IAHA,IAAIsH,EAAyB,EAAfZ,EAAM1G,OAChB2G,EAAS,IAAIY,YAAYhC,EAAgB+B,IAEpCrH,EAAI,EAAGA,EAAIqH,EAASrH,GAAK,EAChC0G,EAAO1G,GAAK,KAAsB,IAAfyG,EAAMzG,EAAI,KAAcA,EAAI,GAGjD,OAAO0G,EAzIgCa,CAAazC,GAAuB,EAAfA,EAAM/E,YERrD,MApBf,SAAYwD,EAASC,EAAKR,GAExB,IAAIwE,GADJjE,EAAUA,GAAW,IACFO,SAAWP,EAAQf,KAAOA,KAK7C,GAHAgF,EAAK,GAAe,GAAVA,EAAK,GAAY,GAC3BA,EAAK,GAAe,GAAVA,EAAK,GAAY,IAEvBhE,EAAK,CACPR,EAASA,GAAU,EAEnB,IAAK,IAAIhD,EAAI,EAAGA,EAAI,KAAMA,EACxBwD,EAAIR,EAAShD,GAAKwH,EAAKxH,GAGzB,OAAOwD,EAGT,OAAO,EAAUgE,IClBnB,SAASC,EAAE5B,EAAGhF,EAAGC,EAAG4G,GAClB,OAAQ7B,GACN,KAAK,EACH,OAAOhF,EAAIC,GAAKD,EAAI6G,EAEtB,KAAK,EACH,OAAO7G,EAAIC,EAAI4G,EAEjB,KAAK,EACH,OAAO7G,EAAIC,EAAID,EAAI6G,EAAI5G,EAAI4G,EAE7B,KAAK,EACH,OAAO7G,EAAIC,EAAI4G,GAIrB,SAASC,EAAK9G,EAAGyD,GACf,OAAOzD,GAAKyD,EAAIzD,IAAM,GAAKyD,EA4Ed,IC5FA,EADNiC,EAAI,KAAM,IDoBnB,SAAczB,GACZ,IAAI8C,EAAI,CAAC,WAAY,WAAY,WAAY,YACzCC,EAAI,CAAC,WAAY,WAAY,WAAY,UAAY,YAEzD,GAAqB,iBAAV/C,EAAoB,CAC7B,IAAI0B,EAAM5B,SAASC,mBAAmBC,IAEtCA,EAAQ,GAER,IAAK,IAAI9E,EAAI,EAAGA,EAAIwG,EAAIzG,SAAUC,EAChC8E,EAAM1K,KAAKoM,EAAIzB,WAAW/E,SAElB0D,MAAMoE,QAAQhD,KAExBA,EAAQpB,MAAMqE,UAAUvD,MAAMwD,KAAKlD,IAGrCA,EAAM1K,KAAK,KAKX,IAJA,IAAI6N,EAAInD,EAAM/E,OAAS,EAAI,EACvBmI,EAAIC,KAAKC,KAAKH,EAAI,IAClBI,EAAI,IAAI3E,MAAMwE,GAETI,EAAK,EAAGA,EAAKJ,IAAKI,EAAI,CAG7B,IAFA,IAAIvF,EAAM,IAAIuE,YAAY,IAEjBiB,EAAI,EAAGA,EAAI,KAAMA,EACxBxF,EAAIwF,GAAKzD,EAAW,GAALwD,EAAc,EAAJC,IAAU,GAAKzD,EAAW,GAALwD,EAAc,EAAJC,EAAQ,IAAM,GAAKzD,EAAW,GAALwD,EAAc,EAAJC,EAAQ,IAAM,EAAIzD,EAAW,GAALwD,EAAc,EAAJC,EAAQ,GAGvIF,EAAEC,GAAMvF,EAGVsF,EAAEH,EAAI,GAAG,IAA2B,GAApBpD,EAAM/E,OAAS,GAASoI,KAAKK,IAAI,EAAG,IACpDH,EAAEH,EAAI,GAAG,IAAMC,KAAKM,MAAMJ,EAAEH,EAAI,GAAG,KACnCG,EAAEH,EAAI,GAAG,IAA2B,GAApBpD,EAAM/E,OAAS,GAAS,WAExC,IAAK,IAAI2I,EAAM,EAAGA,EAAMR,IAAKQ,EAAK,CAGhC,IAFA,IAAIC,EAAI,IAAIrB,YAAY,IAEfxB,EAAI,EAAGA,EAAI,KAAMA,EACxB6C,EAAE7C,GAAKuC,EAAEK,GAAK5C,GAGhB,IAAK,IAAI8C,EAAK,GAAIA,EAAK,KAAMA,EAC3BD,EAAEC,GAAMjB,EAAKgB,EAAEC,EAAK,GAAKD,EAAEC,EAAK,GAAKD,EAAEC,EAAK,IAAMD,EAAEC,EAAK,IAAK,GAShE,IANA,IAAIhD,EAAIiC,EAAE,GACNpE,EAAIoE,EAAE,GACN3B,EAAI2B,EAAE,GACN1B,EAAI0B,EAAE,GACNgB,EAAIhB,EAAE,GAEDiB,EAAM,EAAGA,EAAM,KAAMA,EAAK,CACjC,IAAIjD,EAAIsC,KAAKM,MAAMK,EAAM,IACrBC,EAAIpB,EAAK/B,EAAG,GAAK6B,EAAE5B,EAAGpC,EAAGyC,EAAGC,GAAK0C,EAAIjB,EAAE/B,GAAK8C,EAAEG,KAAS,EAC3DD,EAAI1C,EACJA,EAAID,EACJA,EAAIyB,EAAKlE,EAAG,MAAQ,EACpBA,EAAImC,EACJA,EAAImD,EAGNlB,EAAE,GAAKA,EAAE,GAAKjC,IAAM,EACpBiC,EAAE,GAAKA,EAAE,GAAKpE,IAAM,EACpBoE,EAAE,GAAKA,EAAE,GAAK3B,IAAM,EACpB2B,EAAE,GAAKA,EAAE,GAAK1B,IAAM,EACpB0B,EAAE,GAAKA,EAAE,GAAKgB,IAAM,EAGtB,MAAO,CAAChB,EAAE,IAAM,GAAK,IAAMA,EAAE,IAAM,GAAK,IAAMA,EAAE,IAAM,EAAI,IAAa,IAAPA,EAAE,GAAWA,EAAE,IAAM,GAAK,IAAMA,EAAE,IAAM,GAAK,IAAMA,EAAE,IAAM,EAAI,IAAa,IAAPA,EAAE,GAAWA,EAAE,IAAM,GAAK,IAAMA,EAAE,IAAM,GAAK,IAAMA,EAAE,IAAM,EAAI,IAAa,IAAPA,EAAE,GAAWA,EAAE,IAAM,GAAK,IAAMA,EAAE,IAAM,GAAK,IAAMA,EAAE,IAAM,EAAI,IAAa,IAAPA,EAAE,GAAWA,EAAE,IAAM,GAAK,IAAMA,EAAE,IAAM,GAAK,IAAMA,EAAE,IAAM,EAAI,IAAa,IAAPA,EAAE,OE5FzU,yCCUA,MARf,SAAiBpF,GACf,IAAK,EAASA,GACZ,MAAMW,UAAU,gBAGlB,OAAOtJ,SAAS2I,EAAKG,OAAO,GAAI,GAAI","file":"products-edit-index-js-4.js","sourcesContent":["export default string => string\r\n  .replace(/&/g, '&amp;')\r\n  .replace(/\"/g, '&quot;')\r\n  .replace(/'/g, '&#39;')\r\n  .replace(/</g, '&lt;')\r\n  .replace(/>/g, '&gt;');\r\n","const { v4: uuidv4 } = require('uuid');\r\nimport SortableList from '../sortable-list/index.js';\r\nimport NotificationMessage from '../notification/index.js';\r\nimport escapeHtml from '../../utils/escape-html.js';\r\nimport fetchJson from '../../utils/fetch-json.js';\r\n\r\nexport default class ProductForm {\r\n  element;\r\n  subElements = {};\r\n  formData = {};\r\n  categories = [];\r\n  defaultFormData = {\r\n    title: '',\r\n    description: '',\r\n    quantity: 1,\r\n    subcategory: '',\r\n    images: [],\r\n    status: 1,\r\n    price: 100,\r\n    discount: 0\r\n  };\r\n\r\n  constructor(productId) {\r\n    this.productId = productId;\r\n  }\r\n\r\n  initEventListeners() {\r\n    const { uploadImage, productForm, imageListContainer } = this.subElements;\r\n\r\n    productForm.addEventListener('submit', this.submitForm);\r\n    uploadImage.addEventListener('pointerdown', this.uploadImage);\r\n  }\r\n\r\n  dispatchEvent(id) {\r\n    const event = this.productId\r\n      ? new CustomEvent('product-updated', { detail: id })\r\n      : new CustomEvent('product-saved');\r\n    this.element.dispatchEvent(event);\r\n  }\r\n\r\n  uploadImage = () => {\r\n    const fileInput = document.createElement('input');\r\n    fileInput.type = 'file';\r\n    fileInput.accept = 'image/*';\r\n\r\n    fileInput.addEventListener('change', async () => {\r\n      const [file] = fileInput.files;\r\n\r\n      if (file) {\r\n        const formData = new FormData();\r\n        const { uploadImage, imageListContainer } = this.subElements;\r\n\r\n        formData.append('image', file);\r\n        uploadImage.classList.add('is-loading');\r\n        uploadImage.disabled = true;\r\n\r\n        const result = await fetchJson('https://api.imgur.com/3/image', {\r\n          method: 'POST',\r\n          headers: {\r\n            Authorization: `Client-ID ${process.env.IMGUR_CLIENT_ID}`\r\n          },\r\n          body: formData\r\n        });\r\n\r\n        imageListContainer.append(this.getImageItem(result.data.link, file.name));\r\n        uploadImage.classList.remove('is-loading');\r\n        uploadImage.disabled = false;\r\n\r\n        // Remove input from body\r\n        fileInput.remove();\r\n      }\r\n    });\r\n\r\n    fileInput.hidden = true;\r\n    document.body.appendChild(fileInput);\r\n    fileInput.click();\r\n  };\r\n\r\n  submitForm = event => {\r\n    event.preventDefault();\r\n    this.save();\r\n  };\r\n\r\n  async save() {\r\n    const product = this.getFormData();\r\n\r\n    try {\r\n      const result = await fetchJson(`${process.env.BACKEND_URL}api/rest/products`, {\r\n        method: this.productId ? 'PATCH' : 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(product)\r\n      });\r\n      this.productId\r\n        ? this.showNotificationMessage('Product Saved', 'success')\r\n        : this.showNotificationMessage('Product created', 'success');\r\n      this.dispatchEvent(result.id);\r\n    } catch (error) {\r\n      this.showNotificationMessage('OOPS! Something went wrong', 'error');\r\n      console.error('something went wrong', error);\r\n    }\r\n  }\r\n\r\n  getFormData() {\r\n    const { productForm, imageListContainer } = this.subElements;\r\n    const excludedFields = ['images'];\r\n    const formatToNumber = ['price', 'quantity', 'discount', 'status'];\r\n    const fields = Object.keys(this.defaultFormData).filter(item => !excludedFields.includes(item));\r\n    const values = {};\r\n\r\n    for (const field of fields) {\r\n      values[field] = formatToNumber.includes(field)\r\n        ? parseInt(productForm.querySelector(`#${field}`).value)\r\n        : productForm.querySelector(`#${field}`).value;\r\n    }\r\n\r\n    const imagesHTMLCollection = imageListContainer.querySelectorAll('.sortable-table__cell-img');\r\n\r\n    values.images = [];\r\n    values.id = this.productId;\r\n    // !Case if we create a new product Item and in have no ID yet\r\n    if(!this.productId) {\r\n      values.id = uuidv4();\r\n    }\r\n\r\n    for (const image of imagesHTMLCollection) {\r\n      values.images.push({\r\n        url: image.src,\r\n        source: image.alt\r\n      });\r\n    }\r\n    return values;\r\n  }\r\n\r\n  showNotificationMessage(messageText, messageType) {\r\n    const notificationMessage = new NotificationMessage(messageText, { type: messageType });\r\n    notificationMessage.element.style.position = 'fixed';\r\n    notificationMessage.element.style.bottom = `10px`;\r\n    notificationMessage.element.style.right = '10px';\r\n\r\n    notificationMessage.show();\r\n  }\r\n\r\n  async render() {\r\n    const categoriesPromise = this.loadCategoriesList();\r\n    const productPromise = this.productId\r\n      ? this.loadProductData(this.productId)\r\n      : [this.defaultFormData];\r\n    const [categoriesData, productResponse] = await Promise.all([\r\n      categoriesPromise,\r\n      productPromise\r\n    ]);\r\n\r\n    const [productData] = productResponse;\r\n\r\n    this.formData = productData;\r\n    this.categories = categoriesData;\r\n\r\n    this.renderForm();\r\n    this.setFormData();\r\n    this.createImagesList();\r\n    this.initEventListeners();\r\n\r\n    return this.element;\r\n  }\r\n\r\n  renderForm() {\r\n    const element = document.createElement('div');\r\n    element.innerHTML = this.formData ? this.template : this.getEmptyTemplate();\r\n\r\n    this.element = element.firstElementChild;\r\n    this.subElements = this.getSubElements(element);\r\n  }\r\n\r\n  get template() {\r\n    return `\r\n    <div class=\"product-form\">\r\n      <form data-element=\"productForm\" class=\"form-grid\">\r\n        <div class=\"form-group form-group__half_left\">\r\n          <fieldset>\r\n            <label class=\"form-label\">Название товара</label>\r\n            <input required\r\n              id=\"title\"\r\n              value=\"\"\r\n              type=\"text\"\r\n              name=\"title\"\r\n              class=\"form-control\"\r\n              placeholder=\"Название товара\">\r\n          </fieldset>\r\n        </div>\r\n        <div class=\"form-group form-group__wide\">\r\n          <label class=\"form-label\">Описание</label>\r\n          <textarea required\r\n            id=\"description\"\r\n            class=\"form-control\"\r\n            name=\"description\"\r\n            data-element=\"productDescription\"\r\n            placeholder=\"Описание товара\"></textarea>\r\n        </div>\r\n        <div class=\"form-group form-group__wide\" data-element=\"sortable-list-container\">\r\n          <label class=\"form-label\">Фото</label>\r\n          <div class=\"sortable-list\" data-element=\"imageListContainer\">\r\n          </div>\r\n          <button data-element=\"uploadImage\" type=\"button\" class=\"button-primary-outline\">\r\n            <span>Загрузить</span>\r\n          </button>\r\n        </div>\r\n        <div class=\"form-group form-group__half_left\">\r\n          <label class=\"form-label\">Категория</label>\r\n          <select id=\"subcategory\" class=\"form-control\" name=\"subcategory\">\r\n            ${this.createCategoriesSelect()}\r\n          </select>\r\n        </div>\r\n        <div class=\"form-group form-group__half_left form-group__two-col\">\r\n          <fieldset>\r\n            <label class=\"form-label\">Цена ($)</label>\r\n            <input required\r\n              id=\"price\"\r\n              value=\"\"\r\n              type=\"number\"\r\n              name=\"price\"\r\n              class=\"form-control\"\r\n              placeholder=\"${this.defaultFormData.price}\">\r\n          </fieldset>\r\n          <fieldset>\r\n            <label class=\"form-label\">Скидка ($)</label>\r\n            <input required\r\n              id=\"discount\"\r\n              value=\"\"\r\n              type=\"number\"\r\n              name=\"discount\"\r\n              class=\"form-control\"\r\n              placeholder=\"${this.defaultFormData.discount}\">\r\n          </fieldset>\r\n        </div>\r\n        <div class=\"form-group form-group__part-half\">\r\n          <label class=\"form-label\">Количество</label>\r\n          <input required\r\n            id=\"quantity\"\r\n            value=\"\"\r\n            type=\"number\"\r\n            class=\"form-control\"\r\n            name=\"quantity\"\r\n            placeholder=\"${this.defaultFormData.quantity}\">\r\n        </div>\r\n        <div class=\"form-group form-group__part-half\">\r\n          <label class=\"form-label\">Статус</label>\r\n          <select id=\"status\" class=\"form-control\" name=\"status\">\r\n            <option value=\"1\">Активен</option>\r\n            <option value=\"0\">Неактивен</option>\r\n          </select>\r\n        </div>\r\n        <div class=\"form-buttons\">\r\n          <button type=\"submit\" name=\"save\" class=\"button-primary-outline\">\r\n            ${this.productId ? 'Сохранить' : 'Добавить'} товар\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    `;\r\n  }\r\n\r\n  getEmptyTemplate() {\r\n    return `\r\n    <div>\r\n      <h1 class=\"page-title\">Страница не найдена</h1>\r\n      <p>Извините, данный товар не существует</p>\r\n    </div>`;\r\n  }\r\n\r\n  createCategoriesSelect() {\r\n    return this.categories.map(category => {\r\n      return category.subcategories\r\n        .map(subcategory => {\r\n          return `<option value=\"${subcategory.id}\">${category.title} &gt; ${subcategory.title}</option>`;\r\n        })\r\n        .join('');\r\n    });\r\n  }\r\n\r\n  createImagesList() {\r\n    const { imageListContainer } = this.subElements;\r\n    const { images } = this.formData;\r\n    const items = images.map(image => this.getImageItem(image.url, image.source));\r\n    const sortableList = new SortableList({ items });\r\n    imageListContainer.append(sortableList.element);\r\n  }\r\n\r\n  getImageItem(url, name) {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.innerHTML = `          \r\n        <li class=\"products-edit__imagelist-item sortable-list__item\" style=\"\">\r\n          <span>\r\n            <img src=\"../icons/icon-grab.svg\" data-grab-handle=\"\" alt=\"grab\">\r\n            <img class=\"sortable-table__cell-img\" alt=\"${escapeHtml(name)}\" src=\"${escapeHtml(\r\n      url\r\n    )}\">\r\n            <span>${escapeHtml(name)}</span>\r\n          </span>\r\n          <button type=\"button\">\r\n            <img src=\"../icons/icon-trash.svg\" data-delete-handle=\"\" alt=\"delete\">\r\n          </button>\r\n        </li>`;\r\n\r\n    return wrapper.firstElementChild;\r\n  }\r\n\r\n  getSubElements(element) {\r\n    const elements = element.querySelectorAll('[data-element]');\r\n    return [...elements].reduce((acc, item) => {\r\n      acc[item.dataset.element] = item;\r\n      return acc;\r\n    }, {});\r\n  }\r\n\r\n  async loadCategoriesList() {\r\n    return await fetchJson(\r\n      `${process.env.BACKEND_URL}api/rest/categories?_sort=weight&_refs=subcategory`\r\n    );\r\n  }\r\n\r\n  async loadProductData(id) {\r\n    return await fetchJson(`${process.env.BACKEND_URL}api/rest/products?id=${id}`);\r\n  }\r\n\r\n  setFormData() {\r\n    const { productForm } = this.subElements;\r\n    const excludedData = ['images'];\r\n    const fields = Object.keys(this.defaultFormData).filter(item => !excludedData.includes(item));\r\n    fields.forEach(field => {\r\n      productForm.querySelector(`#${field}`).value =\r\n        this.formData[field] || this.defaultFormData[field];\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n    this.element = null;\r\n    this.subElements = null;\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n  }\r\n}\r\n","import fetchJson from '../../../utils/fetch-json.js';\r\nimport ProductForm from '../../../components/product-form/index.js';\r\n\r\nexport default class Page {\r\n  element;\r\n  productId = null;\r\n  subElements = {};\r\n  components = {};\r\n\r\n  constructor(match) {\r\n    this.match = match;\r\n  }\r\n\r\n  render() {\r\n    this.productId = this.match[1];\r\n    const element = document.createElement('div');\r\n\r\n    element.innerHTML = this.template;\r\n\r\n    this.element = element.firstElementChild;\r\n    this.subElements = this.getSubElements(this.element);\r\n    this.initComponents();\r\n    this.renderComponents();\r\n\r\n    return this.element;\r\n  }\r\n\r\n  async renderComponents() {\r\n    const { productForm } = this.components;\r\n    const { productFormWrapper } = this.subElements;\r\n\r\n    productForm.renderForm();\r\n    await productForm.render();\r\n    productFormWrapper.append(productForm.element);\r\n  }\r\n\r\n  get template() {\r\n    return `\r\n      <div class=\"products-edit\">\r\n      <div class=\"content__top-panel\">\r\n        <h1 class=\"page-title\">\r\n        <a href=\"/products\" class=\"link\">Products</a> / ${this.productId ? 'Edit' : 'Add'}\r\n        </h1>\r\n      </div>\r\n        <div data-element=\"productFormWrapper\" class=\"content-box\">\r\n        <!-- //!ProductFormComponent -->\r\n        </div>\r\n      </div>\r\n    </div>`;\r\n  }\r\n\r\n  initComponents() {\r\n    this.components.productForm = new ProductForm(this.productId);\r\n  }\r\n\r\n  getSubElements($element) {\r\n    const elements = $element.querySelectorAll('[data-element]');\r\n\r\n    return [...elements].reduce((accum, subElement) => {\r\n      accum[subElement.dataset.element] = subElement;\r\n\r\n      return accum;\r\n    }, {});\r\n  }\r\n}\r\n","// same as fetch, but throws FetchError in case of errors\r\n// status >= 400 is an error\r\n// network error / json error are errors\r\n\r\nexport default async function(url, params) {\r\n  let response;\r\n\r\n  try {\r\n    // NOTE: \"toString\" call needed for correct work of \"jest-fetch-mock\"\r\n    response = await fetch(url.toString(), params);\r\n  } catch(err) {\r\n    throw new FetchError(response, \"Network error has occurred.\");\r\n  }\r\n\r\n  let body;\r\n\r\n  if (!response.ok) {\r\n    let errorText = response.statusText; // Not Found (for 404)\r\n\r\n    try {\r\n      body = await response.json();\r\n\r\n      errorText = (body.error && body.error.message) || (body.data && body.data.error && body.data.error.message) || errorText;\r\n    } catch (error) { /* ignore failed body */ }\r\n\r\n    let message = `Error ${response.status}: ${errorText}`;\r\n\r\n    throw new FetchError(response, body, message);\r\n  }\r\n\r\n  try {\r\n    return await response.json();\r\n  } catch(err) {\r\n    throw new FetchError(response, null, err.message);\r\n  }\r\n}\r\n\r\nexport class FetchError extends Error {\r\n  name = \"FetchError\";\r\n\r\n  constructor(response, body, message) {\r\n    super(message);\r\n    this.response = response;\r\n    this.body = body;\r\n  }\r\n}\r\n\r\n// handle uncaught failed fetch through\r\nwindow.addEventListener('unhandledrejection', event => {\r\n  if (event.reason instanceof FetchError) {\r\n    alert(event.reason.message);\r\n  }\r\n});\r\n\r\n","export default class NotificationMessage {\r\n  element;\r\n  static notificationStatus;\r\n\r\n  constructor(messageText, { duration = 2000, type = 'success' } = {}) {\r\n    if (NotificationMessage.notificationStatus) {\r\n      NotificationMessage.notificationStatus.remove();\r\n    }\r\n    this.messageText = messageText;\r\n    this.duration = duration;\r\n    this.type = type;\r\n    this.render();\r\n  }\r\n\r\n  get markup() {\r\n    return `\r\n          <div class=\"notification ${this.type}\" style=\"--value:${this.duration / 1000}s\">\r\n          <div class=\"timer\"></div>\r\n          <div class=\"inner-wrapper\">\r\n          <div class=\"notification-header\">${this.type}</div>\r\n          <div class=\"notification-body\">\r\n              ${this.messageText}\r\n          </div>\r\n          </div>\r\n      </div>\r\n        `;\r\n  }\r\n\r\n  render() {\r\n    const element = document.createElement('div');\r\n    element.innerHTML = this.markup;\r\n    this.element = element.firstElementChild;\r\n\r\n    NotificationMessage.notificationStatus = this.element;\r\n  }\r\n\r\n  show(target = document.body) {\r\n    target.append(this.element);\r\n    setTimeout(() => {\r\n      this.remove();\r\n      this.destroy();\r\n    }, this.duration);\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n  }\r\n\r\n  destroy() {\r\n    this.element = null;\r\n    NotificationMessage.notificationStatus = null;\r\n  }\r\n}\r\n","export default class SortableList {\r\n  element;\r\n  elementInitialIndex;\r\n  pointerInitialShift = {};\r\n  draggingElem;\r\n  placeholderElem;\r\n\r\n  constructor({ items = [] } = {}) {\r\n    this.items = items;\r\n\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    this.element = document.createElement(\"ul\");\r\n    this.element.className = \"sortable-list\";\r\n\r\n    this.addItems();\r\n    this.initEventListeners();\r\n  }\r\n\r\n  initEventListeners() {\r\n    this.element.addEventListener(\"pointerdown\", this.onPointerDown);\r\n  }\r\n\r\n  addItems() {\r\n    for (let item of this.items) {\r\n      item.classList.add(\"sortable-list__item\");\r\n    }\r\n    this.element.append(...this.items);\r\n  }\r\n\r\n  onPointerDown = (event) => {\r\n    if (event.which !== 1) {\r\n      // must be left-button\r\n      return false;\r\n    }\r\n\r\n    const itemElem = event.target.closest(\".sortable-list__item\");\r\n\r\n    if (itemElem) {\r\n      event.preventDefault();\r\n      if (event.target.closest(\"[data-grab-handle]\")) {\r\n        this.dragStart(itemElem, event);\r\n      }\r\n\r\n      if (event.target.closest(\"[data-delete-handle]\")) {\r\n        itemElem.remove();\r\n      }\r\n    }\r\n  };\r\n\r\n  dragStart(itemElem, event) {\r\n    const { clientX, clientY } = event;\r\n\r\n    this.elementInitialIndex = [...this.element.children].indexOf(itemElem);\r\n\r\n    this.pointerInitialShift = {\r\n      x: clientX - itemElem.getBoundingClientRect().x,\r\n      y: clientY - itemElem.getBoundingClientRect().y,\r\n    };\r\n\r\n    this.draggingElem = itemElem;\r\n\r\n    // Create a placeholder\r\n    this.placeholderElem = document.createElement(\"li\");\r\n    this.placeholderElem.className = \"sortable-list__placeholder\";\r\n\r\n    // itemElem will get position:fixed\r\n    // so its width will be auto-set to fit the parent container\r\n    itemElem.style.width = `${itemElem.offsetWidth}px`;\r\n    itemElem.style.height = `${itemElem.offsetHeight}px`;\r\n\r\n    this.placeholderElem.style.width = itemElem.style.width;\r\n    this.placeholderElem.style.height = itemElem.style.height;\r\n\r\n    itemElem.classList.add(\"sortable-list__item_dragging\");\r\n\r\n    itemElem.after(this.placeholderElem);\r\n\r\n    // move to the end, to be over other list elements\r\n    this.element.append(itemElem);\r\n\r\n    this.moveDraggingAt(clientX, clientY);\r\n\r\n    document.addEventListener(\"pointermove\", this.onDocumentPointerMove);\r\n    document.addEventListener(\"pointerup\", this.onDocumentPointerUp);\r\n  }\r\n\r\n  onDocumentPointerMove = (event) => {\r\n    const { clientX, clientY } = event;\r\n\r\n    this.moveDraggingAt(clientX, clientY);\r\n\r\n    const { firstElementChild, children } = this.element;\r\n    const { top: firstElementTop } = firstElementChild.getBoundingClientRect();\r\n    const { bottom } = this.element.getBoundingClientRect();\r\n\r\n    if (clientY < firstElementTop) {\r\n      this.movePlaceholderAt(0);\r\n    } else if (clientY > bottom) {\r\n      this.movePlaceholderAt(children.length);\r\n    } else {\r\n      for (let i = 0; i < children.length; i++) {\r\n        const li = children[i];\r\n        // ignore to prevent bugs when dragging between elements\r\n        if (li !== this.draggingElem) {\r\n          const { top, bottom } = li.getBoundingClientRect();\r\n          const { offsetHeight: height } = li;\r\n\r\n          if (clientY > top && clientY < bottom) {\r\n            // inside the element (y-axis)\r\n            if (clientY < top + height / 2) {\r\n              // upper half of the element\r\n              this.movePlaceholderAt(i);\r\n              break;\r\n            } else {\r\n              // lower half of the element\r\n              this.movePlaceholderAt(i + 1);\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.scrollIfCloseToWindowEdge(clientY);\r\n  };\r\n\r\n  moveDraggingAt(clientX, clientY) {\r\n    this.draggingElem.style.left = clientX - this.pointerInitialShift.x + \"px\";\r\n    this.draggingElem.style.top = clientY - this.pointerInitialShift.y + \"px\";\r\n  }\r\n\r\n  movePlaceholderAt(index) {\r\n    const currentElement = this.element.children[index];\r\n\r\n    if (currentElement !== this.placeholderElem) {\r\n      this.element.insertBefore(this.placeholderElem, currentElement);\r\n    }\r\n  }\r\n\r\n  onDocumentPointerUp = (event) => {\r\n    this.dragStop();\r\n  };\r\n\r\n  dragStop() {\r\n    const placeholderIndex = [...this.element.children].indexOf(\r\n      this.placeholderElem\r\n    );\r\n\r\n    // drop element back\r\n    this.placeholderElem.replaceWith(this.draggingElem);\r\n    this.draggingElem.classList.remove(\"sortable-list__item_dragging\");\r\n\r\n    this.draggingElem.style.left = \"\";\r\n    this.draggingElem.style.top = \"\";\r\n    this.draggingElem.style.width = \"\";\r\n    this.draggingElem.style.height = \"\";\r\n\r\n    document.removeEventListener(\"pointermove\", this.onDocumentPointerMove);\r\n    document.removeEventListener(\"pointerup\", this.onDocumentPointerUp);\r\n\r\n    this.draggingElem = null;\r\n\r\n    if (placeholderIndex !== this.elementInitialIndex) {\r\n      this.element.dispatchEvent(\r\n        new CustomEvent(\"sortable-list-reorder\", {\r\n          bubbles: true,\r\n          detail: {\r\n            from: this.elementInitialIndex,\r\n            to: placeholderIndex,\r\n          },\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  scrollIfCloseToWindowEdge(clientY) {\r\n    const scrollingValue = 10;\r\n    const threshold = 20;\r\n\r\n    if (clientY < threshold) {\r\n      window.scrollBy(0, -scrollingValue);\r\n    } else if (clientY > document.documentElement.clientHeight - threshold) {\r\n      window.scrollBy(0, scrollingValue);\r\n    }\r\n  }\r\n\r\n  remove() {\r\n    this.element.remove();\r\n    document.removeEventListener(\"pointermove\", this.onDocumentPointerMove);\r\n    document.removeEventListener(\"pointerup\", this.onDocumentPointerUp);\r\n  }\r\n\r\n  destroy() {\r\n    this.remove();\r\n  }\r\n}\r\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;"],"sourceRoot":""}